import t from"node:util";let e=(void 0!==typeof globalThis?globalThis:void 0!==typeof window?window:void 0!==typeof global?global:void 0!==typeof self?self:void 0!==typeof this?this:{}).performance;void 0===e&&(e={});const n={upperLetters:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],lowerLetters:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],numbers:[0,1,2,3,4,5,6,7,8,9]};function r(t){let e=0;const r=t.split("").map((t=>{let r;const o=function(t){const e=t.charCodeAt();return e>47&&e<58?n.numbers:e>64&&e<91?n.upperLetters:e>96&&e<123?n.lowerLetters:void 0}(t);return r=o?o[function(t){return Math.floor(Math.random()*Math.floor(t))}(o.length-1)]:t,r!==t&&e++,r})).join("");return e<t.length/2?Array.from({length:r.length}).fill("*").join(""):r}var o=function t(e){let n=e;var r={}.toString.call(e).slice(8,-1);if("Set"==r)return new Set([...e].map((e=>t(e))));if("Map"==r)return new Map([...e].map((e=>[t(e[0]),t(e[1])])));if("Date"==r)return new Date(e.getTime());if("RegExp"==r)return RegExp(e.source,function(t){if("string"==typeof t.source.flags)return t.source.flags;var e=[];return t.global&&e.push("g"),t.ignoreCase&&e.push("i"),t.multiline&&e.push("m"),t.sticky&&e.push("y"),t.unicode&&e.push("u"),e.join("")}(e));if("Array"==r||"Object"==r)for(var o in n=Array.isArray(e)?[]:{},e)n[o]=t(e[o]);return n};var u,a="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function s(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e}function c(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)}function l(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}var f=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function p(){}function h(t){if(!(this instanceof h))return new h(t);this.code=t}function d(t){if(y(t))return t;var e=new p;return"object"==typeof t&&c(s(t),(function(n){e[n]=t[n]})),e}function y(t){return t instanceof p}p.prototype={},h.prototype.runInContext=function(t){if(!(t instanceof p))throw new TypeError("needs a 'context' argument.");if(a.document){var e=a.document.createElement("iframe");e.style||(e.style={}),e.style.display="none",a.document.body.appendChild(e);var n=e.contentWindow,r=n.eval,o=n.execScript;!r&&o&&(o.call(n,"null"),r=n.eval),c(s(t),(function(e){n[e]=t[e]})),c(f,(function(e){t[e]&&(n[e]=t[e])}));var i=s(n),h=r.call(n,this.code);return c(s(n),(function(e){(e in t||-1===function(t,e){if(v)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}(i,e))&&(t[e]=n[e])})),c(f,(function(e){e in t||function(t,e,n){"function"!=typeof u&&(u=l),u(t,e,n)}(t,e,n[e])})),a.document.body.removeChild(e),h}return function(t,e){var n=s(a);return n.push("with (this.__ctx__){return eval(this.__code__)}"),Function.apply(null,n).apply({__code__:t,__ctx__:e})}(this.code,t)},h.prototype.runInThisContext=function(){return new Function("code","return eval(code);").call(a,this.code)},h.prototype.runInNewContext=function(t){var e=d(t),n=this.runInContext(e);return t&&c(s(e),(function(n){t[n]=e[n]})),n};var g={runInContext:function(t,e,n){return new h(t).runInContext(e,n)},isContext:y,createContext:d,createScript:function(t){return new h(t)},Script:h,runInThisContext:function(t,e){return new h(t).runInThisContext(e)},runInNewContext:function(t,e,n){return new h(t).runInNewContext(e,n)}},v=[].indexOf;class m{static get version(){return"1.4.0"}static toString(){return"JavaScript Expression Parser (JSEP) v"+m.version}static addUnaryOp(t){return m.max_unop_len=Math.max(t.length,m.max_unop_len),m.unary_ops[t]=1,m}static addBinaryOp(t,e,n){return m.max_binop_len=Math.max(t.length,m.max_binop_len),m.binary_ops[t]=e,n?m.right_associative.add(t):m.right_associative.delete(t),m}static addIdentifierChar(t){return m.additional_identifier_chars.add(t),m}static addLiteral(t,e){return m.literals[t]=e,m}static removeUnaryOp(t){return delete m.unary_ops[t],t.length===m.max_unop_len&&(m.max_unop_len=m.getMaxKeyLen(m.unary_ops)),m}static removeAllUnaryOps(){return m.unary_ops={},m.max_unop_len=0,m}static removeIdentifierChar(t){return m.additional_identifier_chars.delete(t),m}static removeBinaryOp(t){return delete m.binary_ops[t],t.length===m.max_binop_len&&(m.max_binop_len=m.getMaxKeyLen(m.binary_ops)),m.right_associative.delete(t),m}static removeAllBinaryOps(){return m.binary_ops={},m.max_binop_len=0,m}static removeLiteral(t){return delete m.literals[t],m}static removeAllLiterals(){return m.literals={},m}get char(){return this.expr.charAt(this.index)}get code(){return this.expr.charCodeAt(this.index)}constructor(t){this.expr=t,this.index=0}static parse(t){return new m(t).parse()}static getMaxKeyLen(t){return Math.max(0,...Object.keys(t).map((t=>t.length)))}static isDecimalDigit(t){return t>=48&&t<=57}static binaryPrecedence(t){return m.binary_ops[t]||0}static isIdentifierStart(t){return t>=65&&t<=90||t>=97&&t<=122||t>=128&&!m.binary_ops[String.fromCharCode(t)]||m.additional_identifier_chars.has(String.fromCharCode(t))}static isIdentifierPart(t){return m.isIdentifierStart(t)||m.isDecimalDigit(t)}throwError(t){const e=new Error(t+" at character "+this.index);throw e.index=this.index,e.description=t,e}runHook(t,e){if(m.hooks[t]){const n={context:this,node:e};return m.hooks.run(t,n),n.node}return e}searchHook(t){if(m.hooks[t]){const e={context:this};return m.hooks[t].find((function(t){return t.call(e.context,e),e.node})),e.node}}gobbleSpaces(){let t=this.code;for(;t===m.SPACE_CODE||t===m.TAB_CODE||t===m.LF_CODE||t===m.CR_CODE;)t=this.expr.charCodeAt(++this.index);this.runHook("gobble-spaces")}parse(){this.runHook("before-all");const t=this.gobbleExpressions(),e=1===t.length?t[0]:{type:m.COMPOUND,body:t};return this.runHook("after-all",e)}gobbleExpressions(t){let e,n,r=[];for(;this.index<this.expr.length;)if(e=this.code,e===m.SEMCOL_CODE||e===m.COMMA_CODE)this.index++;else if(n=this.gobbleExpression())r.push(n);else if(this.index<this.expr.length){if(e===t)break;this.throwError('Unexpected "'+this.char+'"')}return r}gobbleExpression(){const t=this.searchHook("gobble-expression")||this.gobbleBinaryExpression();return this.gobbleSpaces(),this.runHook("after-expression",t)}gobbleBinaryOp(){this.gobbleSpaces();let t=this.expr.substr(this.index,m.max_binop_len),e=t.length;for(;e>0;){if(m.binary_ops.hasOwnProperty(t)&&(!m.isIdentifierStart(this.code)||this.index+t.length<this.expr.length&&!m.isIdentifierPart(this.expr.charCodeAt(this.index+t.length))))return this.index+=e,t;t=t.substr(0,--e)}return!1}gobbleBinaryExpression(){let t,e,n,r,o,i,u,a,s;if(i=this.gobbleToken(),!i)return i;if(e=this.gobbleBinaryOp(),!e)return i;for(o={value:e,prec:m.binaryPrecedence(e),right_a:m.right_associative.has(e)},u=this.gobbleToken(),u||this.throwError("Expected expression after "+e),r=[i,o,u];e=this.gobbleBinaryOp();){if(n=m.binaryPrecedence(e),0===n){this.index-=e.length;break}o={value:e,prec:n,right_a:m.right_associative.has(e)},s=e;const a=t=>o.right_a&&t.right_a?n>t.prec:n<=t.prec;for(;r.length>2&&a(r[r.length-2]);)u=r.pop(),e=r.pop().value,i=r.pop(),t={type:m.BINARY_EXP,operator:e,left:i,right:u},r.push(t);t=this.gobbleToken(),t||this.throwError("Expected expression after "+s),r.push(o,t)}for(a=r.length-1,t=r[a];a>1;)t={type:m.BINARY_EXP,operator:r[a-1].value,left:r[a-2],right:t},a-=2;return t}gobbleToken(){let t,e,n,r;if(this.gobbleSpaces(),r=this.searchHook("gobble-token"),r)return this.runHook("after-token",r);if(t=this.code,m.isDecimalDigit(t)||t===m.PERIOD_CODE)return this.gobbleNumericLiteral();if(t===m.SQUOTE_CODE||t===m.DQUOTE_CODE)r=this.gobbleStringLiteral();else if(t===m.OBRACK_CODE)r=this.gobbleArray();else{for(e=this.expr.substr(this.index,m.max_unop_len),n=e.length;n>0;){if(m.unary_ops.hasOwnProperty(e)&&(!m.isIdentifierStart(this.code)||this.index+e.length<this.expr.length&&!m.isIdentifierPart(this.expr.charCodeAt(this.index+e.length)))){this.index+=n;const t=this.gobbleToken();return t||this.throwError("missing unaryOp argument"),this.runHook("after-token",{type:m.UNARY_EXP,operator:e,argument:t,prefix:!0})}e=e.substr(0,--n)}m.isIdentifierStart(t)?(r=this.gobbleIdentifier(),m.literals.hasOwnProperty(r.name)?r={type:m.LITERAL,value:m.literals[r.name],raw:r.name}:r.name===m.this_str&&(r={type:m.THIS_EXP})):t===m.OPAREN_CODE&&(r=this.gobbleGroup())}return r?(r=this.gobbleTokenProperty(r),this.runHook("after-token",r)):this.runHook("after-token",!1)}gobbleTokenProperty(t){this.gobbleSpaces();let e=this.code;for(;e===m.PERIOD_CODE||e===m.OBRACK_CODE||e===m.OPAREN_CODE||e===m.QUMARK_CODE;){let n;if(e===m.QUMARK_CODE){if(this.expr.charCodeAt(this.index+1)!==m.PERIOD_CODE)break;n=!0,this.index+=2,this.gobbleSpaces(),e=this.code}this.index++,e===m.OBRACK_CODE?((t={type:m.MEMBER_EXP,computed:!0,object:t,property:this.gobbleExpression()}).property||this.throwError('Unexpected "'+this.char+'"'),this.gobbleSpaces(),e=this.code,e!==m.CBRACK_CODE&&this.throwError("Unclosed ["),this.index++):e===m.OPAREN_CODE?t={type:m.CALL_EXP,arguments:this.gobbleArguments(m.CPAREN_CODE),callee:t}:(e===m.PERIOD_CODE||n)&&(n&&this.index--,this.gobbleSpaces(),t={type:m.MEMBER_EXP,computed:!1,object:t,property:this.gobbleIdentifier()}),n&&(t.optional=!0),this.gobbleSpaces(),e=this.code}return t}gobbleNumericLiteral(){let t,e,n="";for(;m.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(this.code===m.PERIOD_CODE)for(n+=this.expr.charAt(this.index++);m.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);if(t=this.char,"e"===t||"E"===t){for(n+=this.expr.charAt(this.index++),t=this.char,"+"!==t&&"-"!==t||(n+=this.expr.charAt(this.index++));m.isDecimalDigit(this.code);)n+=this.expr.charAt(this.index++);m.isDecimalDigit(this.expr.charCodeAt(this.index-1))||this.throwError("Expected exponent ("+n+this.char+")")}return e=this.code,m.isIdentifierStart(e)?this.throwError("Variable names cannot start with a number ("+n+this.char+")"):(e===m.PERIOD_CODE||1===n.length&&n.charCodeAt(0)===m.PERIOD_CODE)&&this.throwError("Unexpected period"),{type:m.LITERAL,value:parseFloat(n),raw:n}}gobbleStringLiteral(){let t="";const e=this.index,n=this.expr.charAt(this.index++);let r=!1;for(;this.index<this.expr.length;){let e=this.expr.charAt(this.index++);if(e===n){r=!0;break}if("\\"===e)switch(e=this.expr.charAt(this.index++),e){case"n":t+="\n";break;case"r":t+="\r";break;case"t":t+="\t";break;case"b":t+="\b";break;case"f":t+="\f";break;case"v":t+="\v";break;default:t+=e}else t+=e}return r||this.throwError('Unclosed quote after "'+t+'"'),{type:m.LITERAL,value:t,raw:this.expr.substring(e,this.index)}}gobbleIdentifier(){let t=this.code,e=this.index;for(m.isIdentifierStart(t)?this.index++:this.throwError("Unexpected "+this.char);this.index<this.expr.length&&(t=this.code,m.isIdentifierPart(t));)this.index++;return{type:m.IDENTIFIER,name:this.expr.slice(e,this.index)}}gobbleArguments(t){const e=[];let n=!1,r=0;for(;this.index<this.expr.length;){this.gobbleSpaces();let o=this.code;if(o===t){n=!0,this.index++,t===m.CPAREN_CODE&&r&&r>=e.length&&this.throwError("Unexpected token "+String.fromCharCode(t));break}if(o===m.COMMA_CODE){if(this.index++,r++,r!==e.length)if(t===m.CPAREN_CODE)this.throwError("Unexpected token ,");else if(t===m.CBRACK_CODE)for(let t=e.length;t<r;t++)e.push(null)}else if(e.length!==r&&0!==r)this.throwError("Expected comma");else{const t=this.gobbleExpression();t&&t.type!==m.COMPOUND||this.throwError("Expected comma"),e.push(t)}}return n||this.throwError("Expected "+String.fromCharCode(t)),e}gobbleGroup(){this.index++;let t=this.gobbleExpressions(m.CPAREN_CODE);if(this.code===m.CPAREN_CODE)return this.index++,1===t.length?t[0]:!!t.length&&{type:m.SEQUENCE_EXP,expressions:t};this.throwError("Unclosed (")}gobbleArray(){return this.index++,{type:m.ARRAY_EXP,elements:this.gobbleArguments(m.CBRACK_CODE)}}}const b=new class{add(t,e,n){if("string"!=typeof arguments[0])for(let t in arguments[0])this.add(t,arguments[0][t],arguments[1]);else(Array.isArray(t)?t:[t]).forEach((function(t){this[t]=this[t]||[],e&&this[t][n?"unshift":"push"](e)}),this)}run(t,e){this[t]=this[t]||[],this[t].forEach((function(t){t.call(e&&e.context?e.context:e,e)}))}};Object.assign(m,{hooks:b,plugins:new class{constructor(t){this.jsep=t,this.registered={}}register(...t){t.forEach((t=>{if("object"!=typeof t||!t.name||!t.init)throw new Error("Invalid JSEP plugin format");this.registered[t.name]||(t.init(this.jsep),this.registered[t.name]=t)}))}}(m),COMPOUND:"Compound",SEQUENCE_EXP:"SequenceExpression",IDENTIFIER:"Identifier",MEMBER_EXP:"MemberExpression",LITERAL:"Literal",THIS_EXP:"ThisExpression",CALL_EXP:"CallExpression",UNARY_EXP:"UnaryExpression",BINARY_EXP:"BinaryExpression",ARRAY_EXP:"ArrayExpression",TAB_CODE:9,LF_CODE:10,CR_CODE:13,SPACE_CODE:32,PERIOD_CODE:46,COMMA_CODE:44,SQUOTE_CODE:39,DQUOTE_CODE:34,OPAREN_CODE:40,CPAREN_CODE:41,OBRACK_CODE:91,CBRACK_CODE:93,QUMARK_CODE:63,SEMCOL_CODE:59,COLON_CODE:58,unary_ops:{"-":1,"!":1,"~":1,"+":1},binary_ops:{"||":1,"??":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":10,"/":10,"%":10,"**":11},right_associative:new Set(["**"]),additional_identifier_chars:new Set(["$","_"]),literals:{true:!0,false:!1,null:null},this_str:"this"}),m.max_unop_len=m.getMaxKeyLen(m.unary_ops),m.max_binop_len=m.getMaxKeyLen(m.binary_ops);const w=t=>new m(t).parse(),E=Object.getOwnPropertyNames(class{});Object.getOwnPropertyNames(m).filter((t=>!E.includes(t)&&void 0===w[t])).forEach((t=>{w[t]=m[t]})),w.Jsep=m;var _={name:"ternary",init(t){t.hooks.add("after-expression",(function(e){if(e.node&&this.code===t.QUMARK_CODE){this.index++;const n=e.node,r=this.gobbleExpression();if(r||this.throwError("Expected expression"),this.gobbleSpaces(),this.code===t.COLON_CODE){this.index++;const o=this.gobbleExpression();if(o||this.throwError("Expected expression"),e.node={type:"ConditionalExpression",test:n,consequent:r,alternate:o},n.operator&&t.binary_ops[n.operator]<=.9){let r=n;for(;r.right.operator&&t.binary_ops[r.right.operator]<=.9;)r=r.right;e.node.test=r.right,r.right=e.node,e.node=n}}else this.throwError("Expected :")}}))}};w.plugins.register(_);var x={name:"regex",init(t){t.hooks.add("gobble-token",(function(e){if(47===this.code){const n=++this.index;let r=!1;for(;this.index<this.expr.length;){if(47===this.code&&!r){const r=this.expr.slice(n,this.index);let o,i="";for(;++this.index<this.expr.length;){const t=this.code;if(!(t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57))break;i+=this.char}try{o=new RegExp(r,i)}catch(t){this.throwError(t.message)}return e.node={type:t.LITERAL,value:o,raw:this.expr.slice(n-1,this.index)},e.node=this.gobbleTokenProperty(e.node),e.node}this.code===t.OBRACK_CODE?r=!0:r&&this.code===t.CBRACK_CODE&&(r=!1),this.index+=92===this.code?2:1}this.throwError("Unclosed Regex")}}))}};const A={name:"assignment",assignmentOperators:new Set(["=","*=","**=","/=","%=","+=","-=","<<=",">>=",">>>=","&=","^=","|=","||=","&&=","??="]),updateOperators:[43,45],assignmentPrecedence:.9,init(t){const e=[t.IDENTIFIER,t.MEMBER_EXP];function n(t){A.assignmentOperators.has(t.operator)?(t.type="AssignmentExpression",n(t.left),n(t.right)):t.operator||Object.values(t).forEach((t=>{t&&"object"==typeof t&&n(t)}))}A.assignmentOperators.forEach((e=>t.addBinaryOp(e,A.assignmentPrecedence,!0))),t.hooks.add("gobble-token",(function(t){const n=this.code;A.updateOperators.some((t=>t===n&&t===this.expr.charCodeAt(this.index+1)))&&(this.index+=2,t.node={type:"UpdateExpression",operator:43===n?"++":"--",argument:this.gobbleTokenProperty(this.gobbleIdentifier()),prefix:!0},t.node.argument&&e.includes(t.node.argument.type)||this.throwError(`Unexpected ${t.node.operator}`))})),t.hooks.add("after-token",(function(t){if(t.node){const n=this.code;A.updateOperators.some((t=>t===n&&t===this.expr.charCodeAt(this.index+1)))&&(e.includes(t.node.type)||this.throwError(`Unexpected ${t.node.operator}`),this.index+=2,t.node={type:"UpdateExpression",operator:43===n?"++":"--",argument:t.node,prefix:!1})}})),t.hooks.add("after-expression",(function(t){t.node&&n(t.node)}))}};w.plugins.register(x,A),w.addUnaryOp("typeof"),w.addLiteral("null",null),w.addLiteral("undefined",void 0);const O=new Set(["constructor","__proto__","__defineGetter__","__defineSetter__"]),N={evalAst(t,e){switch(t.type){case"BinaryExpression":case"LogicalExpression":return N.evalBinaryExpression(t,e);case"Compound":return N.evalCompound(t,e);case"ConditionalExpression":return N.evalConditionalExpression(t,e);case"Identifier":return N.evalIdentifier(t,e);case"Literal":return N.evalLiteral(t,e);case"MemberExpression":return N.evalMemberExpression(t,e);case"UnaryExpression":return N.evalUnaryExpression(t,e);case"ArrayExpression":return N.evalArrayExpression(t,e);case"CallExpression":return N.evalCallExpression(t,e);case"AssignmentExpression":return N.evalAssignmentExpression(t,e);default:throw SyntaxError("Unexpected expression",t)}},evalBinaryExpression:(t,e)=>({"||":(t,e)=>t||e(),"&&":(t,e)=>t&&e(),"|":(t,e)=>t|e(),"^":(t,e)=>t^e(),"&":(t,e)=>t&e(),"==":(t,e)=>t==e(),"!=":(t,e)=>t!=e(),"===":(t,e)=>t===e(),"!==":(t,e)=>t!==e(),"<":(t,e)=>t<e(),">":(t,e)=>t>e(),"<=":(t,e)=>t<=e(),">=":(t,e)=>t>=e(),"<<":(t,e)=>t<<e(),">>":(t,e)=>t>>e(),">>>":(t,e)=>t>>>e(),"+":(t,e)=>t+e(),"-":(t,e)=>t-e(),"*":(t,e)=>t*e(),"/":(t,e)=>t/e(),"%":(t,e)=>t%e()}[t.operator](N.evalAst(t.left,e),(()=>N.evalAst(t.right,e)))),evalCompound(t,e){let n;for(let r=0;r<t.body.length;r++){"Identifier"===t.body[r].type&&["var","let","const"].includes(t.body[r].name)&&t.body[r+1]&&"AssignmentExpression"===t.body[r+1].type&&(r+=1);const o=t.body[r];n=N.evalAst(o,e)}return n},evalConditionalExpression:(t,e)=>N.evalAst(t.test,e)?N.evalAst(t.consequent,e):N.evalAst(t.alternate,e),evalIdentifier(t,e){if(Object.hasOwn(e,t.name))return e[t.name];throw ReferenceError(`${t.name} is not defined`)},evalLiteral:t=>t.value,evalMemberExpression(t,e){const n=String(t.computed?N.evalAst(t.property):t.property.name),r=N.evalAst(t.object,e);if(null==r)throw TypeError(`Cannot read properties of ${r} (reading '${n}')`);if(!Object.hasOwn(r,n)&&O.has(n))throw TypeError(`Cannot read properties of ${r} (reading '${n}')`);const o=r[n];return"function"==typeof o?o.bind(r):o},evalUnaryExpression:(t,e)=>({"-":t=>-N.evalAst(t,e),"!":t=>!N.evalAst(t,e),"~":t=>~N.evalAst(t,e),"+":t=>+N.evalAst(t,e),typeof:t=>typeof N.evalAst(t,e)}[t.operator](t.argument)),evalArrayExpression:(t,e)=>t.elements.map((t=>N.evalAst(t,e))),evalCallExpression(t,e){const n=t.arguments.map((t=>N.evalAst(t,e)));return N.evalAst(t.callee,e)(...n)},evalAssignmentExpression(t,e){if("Identifier"!==t.left.type)throw SyntaxError("Invalid left-hand side in assignment");const n=t.left.name,r=N.evalAst(t.right,e);return e[n]=r,e[n]}};function j(t,e){return(t=t.slice()).push(e),t}function S(t,e){return(e=e.slice()).unshift(t),e}class C extends Error{constructor(t){super('JSONPath should not be called with "new" (it prevents return of (unwrapped) scalar values)'),this.avoidNew=!0,this.value=t,this.name="NewError"}}function T(t,e,n,r,o){if(!(this instanceof T))try{return new T(t,e,n,r,o)}catch(t){if(!t.avoidNew)throw t;return t.value}"string"==typeof t&&(o=r,r=n,n=e,e=t,t=null);const i=t&&"object"==typeof t;if(t=t||{},this.json=t.json||n,this.path=t.path||e,this.resultType=t.resultType||"value",this.flatten=t.flatten||!1,this.wrap=!Object.hasOwn(t,"wrap")||t.wrap,this.sandbox=t.sandbox||{},this.eval=void 0===t.eval?"safe":t.eval,this.ignoreEvalErrors=void 0!==t.ignoreEvalErrors&&t.ignoreEvalErrors,this.parent=t.parent||null,this.parentProperty=t.parentProperty||null,this.callback=t.callback||r||null,this.otherTypeCallback=t.otherTypeCallback||o||function(){throw new TypeError("You must supply an otherTypeCallback callback option with the @other() operator.")},!1!==t.autostart){const r={path:i?t.path:e};i?"json"in t&&(r.json=t.json):r.json=n;const o=this.evaluate(r);if(!o||"object"!=typeof o)throw new C(o);return o}}function I(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var r=n>=0?arguments[n]:"/";if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(t=r+"/"+t,e="/"===r.charAt(0))}return t=function(t,e){for(var n=0,r=t.length-1;r>=0;r--){var o=t[r];"."===o?t.splice(r,1):".."===o?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}(function(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}(t.split("/"),(function(t){return!!t})),!e).join("/"),(e?"/":"")+t||"."}T.prototype.evaluate=function(t,e,n,r){let o=this.parent,i=this.parentProperty,{flatten:u,wrap:a}=this;if(this.currResultType=this.resultType,this.currEval=this.eval,this.currSandbox=this.sandbox,n=n||this.callback,this.currOtherTypeCallback=r||this.otherTypeCallback,e=e||this.json,(t=t||this.path)&&"object"==typeof t&&!Array.isArray(t)){if(!t.path&&""!==t.path)throw new TypeError('You must supply a "path" property when providing an object argument to JSONPath.evaluate().');if(!Object.hasOwn(t,"json"))throw new TypeError('You must supply a "json" property when providing an object argument to JSONPath.evaluate().');({json:e}=t),u=Object.hasOwn(t,"flatten")?t.flatten:u,this.currResultType=Object.hasOwn(t,"resultType")?t.resultType:this.currResultType,this.currSandbox=Object.hasOwn(t,"sandbox")?t.sandbox:this.currSandbox,a=Object.hasOwn(t,"wrap")?t.wrap:a,this.currEval=Object.hasOwn(t,"eval")?t.eval:this.currEval,n=Object.hasOwn(t,"callback")?t.callback:n,this.currOtherTypeCallback=Object.hasOwn(t,"otherTypeCallback")?t.otherTypeCallback:this.currOtherTypeCallback,o=Object.hasOwn(t,"parent")?t.parent:o,i=Object.hasOwn(t,"parentProperty")?t.parentProperty:i,t=t.path}if(o=o||null,i=i||null,Array.isArray(t)&&(t=T.toPathString(t)),!t&&""!==t||!e)return;const s=T.toPathArray(t);"$"===s[0]&&s.length>1&&s.shift(),this._hasParentSelector=null;const c=this._trace(s,e,["$"],o,i,n).filter((function(t){return t&&!t.isParentSelector}));return c.length?a||1!==c.length||c[0].hasArrExpr?c.reduce(((t,e)=>{const n=this._getPreferredOutput(e);return u&&Array.isArray(n)?t=t.concat(n):t.push(n),t}),[]):this._getPreferredOutput(c[0]):a?[]:void 0},T.prototype._getPreferredOutput=function(t){const e=this.currResultType;switch(e){case"all":{const e=Array.isArray(t.path)?t.path:T.toPathArray(t.path);return t.pointer=T.toPointer(e),t.path="string"==typeof t.path?t.path:T.toPathString(t.path),t}case"value":case"parent":case"parentProperty":return t[e];case"path":return T.toPathString(t[e]);case"pointer":return T.toPointer(t.path);default:throw new TypeError("Unknown result type")}},T.prototype._handleCallback=function(t,e,n){if(e){const r=this._getPreferredOutput(t);t.path="string"==typeof t.path?t.path:T.toPathString(t.path),e(r,n,t)}},T.prototype._trace=function(t,e,n,r,o,i,u,a){let s;if(!t.length)return s={path:n,value:e,parent:r,parentProperty:o,hasArrExpr:u},this._handleCallback(s,i,"value"),s;const c=t[0],l=t.slice(1),f=[];function p(t){Array.isArray(t)?t.forEach((t=>{f.push(t)})):f.push(t)}if(("string"!=typeof c||a)&&e&&Object.hasOwn(e,c))p(this._trace(l,e[c],j(n,c),e,c,i,u));else if("*"===c)this._walk(e,(t=>{p(this._trace(l,e[t],j(n,t),e,t,i,!0,!0))}));else if(".."===c)p(this._trace(l,e,n,r,o,i,u)),this._walk(e,(r=>{"object"==typeof e[r]&&p(this._trace(t.slice(),e[r],j(n,r),e,r,i,!0))}));else{if("^"===c)return this._hasParentSelector=!0,{path:n.slice(0,-1),expr:l,isParentSelector:!0};if("~"===c)return s={path:j(n,c),value:o,parent:r,parentProperty:null},this._handleCallback(s,i,"property"),s;if("$"===c)p(this._trace(l,e,n,null,null,i,u));else if(/^(-?\d*):(-?\d*):?(\d*)$/u.test(c))p(this._slice(c,l,e,n,r,o,i));else if(0===c.indexOf("?(")){if(!1===this.currEval)throw new Error("Eval [?(expr)] prevented in JSONPath expression.");const t=c.replace(/^\?\((.*?)\)$/u,"$1"),u=/@.?([^?]*)[['](\??\(.*?\))(?!.\)\])[\]']/gu.exec(t);u?this._walk(e,(t=>{const a=[u[2]],s=u[1]?e[t][u[1]]:e[t];this._trace(a,s,n,r,o,i,!0).length>0&&p(this._trace(l,e[t],j(n,t),e,t,i,!0))})):this._walk(e,(u=>{this._eval(t,e[u],u,n,r,o)&&p(this._trace(l,e[u],j(n,u),e,u,i,!0))}))}else if("("===c[0]){if(!1===this.currEval)throw new Error("Eval [(expr)] prevented in JSONPath expression.");p(this._trace(S(this._eval(c,e,n.at(-1),n.slice(0,-1),r,o),l),e,n,r,o,i,u))}else if("@"===c[0]){let t=!1;const u=c.slice(1,-2);switch(u){case"scalar":e&&["object","function"].includes(typeof e)||(t=!0);break;case"boolean":case"string":case"undefined":case"function":typeof e===u&&(t=!0);break;case"integer":!Number.isFinite(e)||e%1||(t=!0);break;case"number":Number.isFinite(e)&&(t=!0);break;case"nonFinite":"number"!=typeof e||Number.isFinite(e)||(t=!0);break;case"object":e&&typeof e===u&&(t=!0);break;case"array":Array.isArray(e)&&(t=!0);break;case"other":t=this.currOtherTypeCallback(e,n,r,o);break;case"null":null===e&&(t=!0);break;default:throw new TypeError("Unknown value type "+u)}if(t)return s={path:n,value:e,parent:r,parentProperty:o},this._handleCallback(s,i,"value"),s}else if("`"===c[0]&&e&&Object.hasOwn(e,c.slice(1))){const t=c.slice(1);p(this._trace(l,e[t],j(n,t),e,t,i,u,!0))}else if(c.includes(",")){const t=c.split(",");for(const u of t)p(this._trace(S(u,l),e,n,r,o,i,!0))}else!a&&e&&Object.hasOwn(e,c)&&p(this._trace(l,e[c],j(n,c),e,c,i,u,!0))}if(this._hasParentSelector)for(let t=0;t<f.length;t++){const n=f[t];if(n&&n.isParentSelector){const a=this._trace(n.expr,e,n.path,r,o,i,u);if(Array.isArray(a)){f[t]=a[0];const e=a.length;for(let n=1;n<e;n++)t++,f.splice(t,0,a[n])}else f[t]=a}}return f},T.prototype._walk=function(t,e){if(Array.isArray(t)){const n=t.length;for(let t=0;t<n;t++)e(t)}else t&&"object"==typeof t&&Object.keys(t).forEach((t=>{e(t)}))},T.prototype._slice=function(t,e,n,r,o,i,u){if(!Array.isArray(n))return;const a=n.length,s=t.split(":"),c=s[2]&&Number.parseInt(s[2])||1;let l=s[0]&&Number.parseInt(s[0])||0,f=s[1]&&Number.parseInt(s[1])||a;l=l<0?Math.max(0,l+a):Math.min(a,l),f=f<0?Math.max(0,f+a):Math.min(a,f);const p=[];for(let t=l;t<f;t+=c){this._trace(S(t,e),n,r,o,i,u,!0).forEach((t=>{p.push(t)}))}return p},T.prototype._eval=function(t,e,n,r,o,i){this.currSandbox._$_parentProperty=i,this.currSandbox._$_parent=o,this.currSandbox._$_property=n,this.currSandbox._$_root=this.json,this.currSandbox._$_v=e;const u=t.includes("@path");u&&(this.currSandbox._$_path=T.toPathString(r.concat([n])));const a=this.currEval+"Script:"+t;if(!T.cache[a]){let e=t.replaceAll("@parentProperty","_$_parentProperty").replaceAll("@parent","_$_parent").replaceAll("@property","_$_property").replaceAll("@root","_$_root").replaceAll(/@([.\s)[])/gu,"_$_v$1");if(u&&(e=e.replaceAll("@path","_$_path")),"safe"===this.currEval||!0===this.currEval||void 0===this.currEval)T.cache[a]=new this.safeVm.Script(e);else if("native"===this.currEval)T.cache[a]=new this.vm.Script(e);else if("function"==typeof this.currEval&&this.currEval.prototype&&Object.hasOwn(this.currEval.prototype,"runInNewContext")){const t=this.currEval;T.cache[a]=new t(e)}else{if("function"!=typeof this.currEval)throw new TypeError(`Unknown "eval" property "${this.currEval}"`);T.cache[a]={runInNewContext:t=>this.currEval(e,t)}}}try{return T.cache[a].runInNewContext(this.currSandbox)}catch(e){if(this.ignoreEvalErrors)return!1;throw new Error("jsonPath: "+e.message+": "+t)}},T.cache={},T.toPathString=function(t){const e=t,n=e.length;let r="$";for(let t=1;t<n;t++)/^(~|\^|@.*?\(\))$/u.test(e[t])||(r+=/^[0-9*]+$/u.test(e[t])?"["+e[t]+"]":"['"+e[t]+"']");return r},T.toPointer=function(t){const e=t,n=e.length;let r="";for(let t=1;t<n;t++)/^(~|\^|@.*?\(\))$/u.test(e[t])||(r+="/"+e[t].toString().replaceAll("~","~0").replaceAll("/","~1"));return r},T.toPathArray=function(t){const{cache:e}=T;if(e[t])return e[t].concat();const n=[],r=t.replaceAll(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\(\)/gu,";$&;").replaceAll(/[['](\??\(.*?\))[\]'](?!.\])/gu,(function(t,e){return"[#"+(n.push(e)-1)+"]"})).replaceAll(/\[['"]([^'\]]*)['"]\]/gu,(function(t,e){return"['"+e.replaceAll(".","%@%").replaceAll("~","%%@@%%")+"']"})).replaceAll("~",";~;").replaceAll(/['"]?\.['"]?(?![^[]*\])|\[['"]?/gu,";").replaceAll("%@%",".").replaceAll("%%@@%%","~").replaceAll(/(?:;)?(\^+)(?:;)?/gu,(function(t,e){return";"+e.split("").join(";")+";"})).replaceAll(/;;;|;;/gu,";..;").replaceAll(/;$|'?\]|'$/gu,""),o=r.split(";").map((function(t){const e=t.match(/#(\d+)/u);return e&&e[1]?n[e[1]]:t}));return e[t]=o,e[t].concat()},T.prototype.safeVm={Script:class{constructor(t){this.code=t,this.ast=w(this.code)}runInNewContext(t){const e=Object.assign(Object.create(null),t);return N.evalAst(this.ast,e)}}},T.prototype.vm=g;const $=(t,e)=>n=>{let r=n;return"function"==typeof e&&(r=e(n)),console.log(`${t}: ${r}`),n};function R(t){const e=process.cwd();let n=t.indexOf("(file://","");if(-1===n&&(n=t.indexOf("file://","")),-1===n&&(n=t.indexOf("(","")),-1===n)return t;const r=t.replace("(file://","").replace("file://","").replace("(","").replace(")",""),o=r.match(/[0-9]+:[0-9]+/);if(null===o)return t;const i=o[0],u=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=I(t).substr(1),e=I(e).substr(1);for(var r=n(t.split("/")),o=n(e.split("/")),i=Math.min(r.length,o.length),u=i,a=0;a<i;a++)if(r[a]!==o[a]){u=a;break}var s=[];for(a=u;a<r.length;a++)s.push("..");return(s=s.concat(o.slice(u))).join("/")}(e,r.substring(n,o.index-1));return`${t.substring(0,n-1)} ${u}:${i}`}function D(t,e=5){if(t instanceof Error==!1)return"Not an error object";const n=t.stack.split("\n").filter((t=>!t.includes("node_modules")&&!t.includes("node:internal"))).map((t=>t.trim())).filter((t=>t.startsWith("at"))).map(R),r=[],o=n.length;o>e?(r.push(...n.slice(0,e-1)),r.push("...skipped..."),r.push(n[o-1])):r.push(...n);const i=r.join(" -> ");return`${`${t.name}: ${t.message} ${t.cause?.message?`[cause]: ${t.cause.message}`:""}`}\nStack Trace: ${i}`}class P extends Error{constructor(t="GENERIC",e=t,n={status:500}){super(e),super.name=t,Error.captureStackTrace&&Error.captureStackTrace(this,P),this.data=n}map(t){return this}chain(t){return this}summarizeError(t){return D(t)}static of=P}function k(t){return class extends P{constructor(e,n,r){super(e,n,r),this.name=t}}}function M(t){const e=typeof t;return"object"!==e&&"undefined"!==e&&"function"!==e}class U{constructor(t,e){let n,r;if(!1===Array.isArray(t))throw new P("NOT_AN_ARRAY","Only Array composed of non objects are permitted");if(t.filter((t=>"object"===t)).length>0)throw new P("ARRAY_VALUES_MUST_BE_OF_BASIC_TYPE","Only basic types are allowed");const i=t.filter((t=>"get"===t||"set"===t||"getValue"===t));if(i.length>0)throw new P("ENUM_INVALID_ENUM_VALUE",`The following ENUM value/s are not allowed: ${i} as they are reserved words for enum`);const u=B(W(t),(function(){return!1}));return n=t[0],u[n]=!0,void 0!==e&&function(t){if(null===t||"object"!=typeof t||!0===Array.isArray(t))throw new P("ENUM_RULES_BAD_FORMAT",`rules is not an object: ${t}`);for(const e in t){if(void 0===u[e]||!1===Array.isArray(t[e]))throw new P("ENUM_RULES_BAD_FORMAT",`Each attribute of rules must be an element in the ENUM and its value should be an array: ${u[e]}${t[e]}`);const n=t[e].filter((t=>void 0===u[t]));if(n.length>0)throw new P("ENUM_RULES_BAD_FORMAT",`All elements in a rule entry must be one of the list values in the ENUM. The following values dont exist: ${n}`)}r=o(t)}(e),this.get=function(t,e){if("getValue"===e)return a;if(null==u[e])throw new P("ENUM_INVALID_PROPERTY",`.${e} is none of the possible values ${this}`);return u[e]},this.set=function(t,e,o){if(!0!==o)throw new P("ENUM_ACTIVATION_NO_TRUE",`Tryng to set ${e} with ${o} but activation only admits true`);if(void 0===u[e])throw new P("ENUM_INVALID_PROPERTY",`.${e} is none of the possible values ${this}`);if(!function(t,e){return void 0===r||void 0!==r[t]&&-1!==r[t].indexOf(e)}(n,e))throw new P("ENUM_TRANSITION_NOT_ALLOWED",`.From: ${n} --\x3e To: ${e}`);u[n]=!1,u[e]=!0,n=e;return!0},this.getValue=a,new Proxy(u,this);function a(){return n}}}class F{constructor(t){const e=this.#t(o(t));return new Proxy(e,this)}#t(t){if(null==t)throw new Error("Null or undefined is not permitted to construct a EnumMap instance.");const e=Object.getPrototypeOf(t).constructor.name;if("Map"===e)return Object.fromEntries(t);if("Object"===e)return t;let n;const r=[];if("Array"===e){for(let e=0;e<t.length;e++){if(M(t[e])){if(r[t[e]]=e,void 0!==n&&"basicType"!==n)throw new P("ENUMMAP_VALUES_NOT_VALID","EnumMap values should be consistent...");n="basicType"}if(Array.isArray(t[e])&&2===t[e].length){if(r[t[e][0]]=t[e][1],void 0!==n&&"array"!==n)throw new P("ENUMMAP_VALUES_NOT_VALID","EnumMap values should be consistent...");n="array"}if(null!==t[e]&&"object"==typeof t[e]&&1===Object.keys(t[e]).length){const o=Object.keys(t[e])[0];if(r[o]=t[e][o],void 0!==n&&"object"!==n)throw new P("ENUMMAP_VALUES_NOT_VALID","EnumMap values should be consistent...");n="object"}}if(void 0===n)throw new P("ENUM_VALUES_NOT_VALID","Values must be an array of strings, an array of arrays, an array of objects or an array of maps")}return r}get(t,e){if(null==t[e]&&null==this[e])throw new P("ENUM_OUT_OF_RANGE",`.${e} is none of the possible values ${this}`);return null!=this[e]?this[e]:t[e]}set(t,e){throw new P("ENUM_NOT_MODIFIABLE",`Object of .${e} is not modifiable`)}invert(){const t={};for(const e in this)if(this.hasOwnProperty(e)){if(!1===M(this[e]))throw new P("INVERT_VALUES_NOT_BASIC_TYPE","EnumMap values should be basic types");t[this[e]]=e}return new F(o(t))}}function L(t,e,n){t.forEach((function(t){if(t!==t.toUpperCase())throw new P("STATE_MUST_BE_UPPERCASE",`The state: ${t} does not have all characters in uppercase`)})),e.forEach((function(t){if(t!==t.toLowerCase())throw new P("EVENT_MUST_BE_LOWERCASE",`The event: ${t} does not have all characters in lowercase`)}));let r=t[0];const o=Object.entries(n).reduce(((t,[n,r])=>{u(n);let o=r;if("string"==typeof r)u(r),o=e.reduce(((t,e)=>(t[e]=r,t)),{});else for(const[t,e]of Object.entries(o))a(t),u(e);return t[n]={...t[n],...o},t}),t.reduce(((t,n)=>(t[n]=e.reduce(((t,e)=>(t[e]=e.toUpperCase(),t)),{}),t)),{}));function i(t){return a(t),r=o[r][t],r}return i.valueOf=()=>r,i;function u(e){if(!1===t.some((t=>t===e)))throw new P("STATE_NOT_FOUND",`The state: ${e} was not found in the list of states supplied: ${t}`)}function a(t){if(!1===e.some((e=>e===t)))throw new P("EVENT_NOT_FOUND",`The event: ${t} was not found in the list of events supplied: ${e}`)}}function B(t,e){return t.reduce(((t,n,r)=>(t[n]=e(n,r),t)),{})}function Y(t){if("function"==typeof t?.[Symbol.iterator]){const e={};for(const n of t)for(const t in n)e[t]=n[t];return e}return arr.reduce(((t,e,n)=>{for(const n in e)t[n]=e[n];return t}),{})}function W(t){return[...new Set(t)]}function q(t,e,n=!0){const r=["$"],i=n?o(t):t;let u=!1;const a={};a.$=i;const s=c(e,a,"$",r);return i!==a.$||!0===u||!1===s&&function t(n){if(n&&n instanceof Object&&!1===u)for(const o in n)if(n.hasOwnProperty(o)){r.push(o);const i=c(e,n,o,r);if(!0===u)return;!1===i&&t(n[o]),r.pop()}}(a.$),a.$;function c(t,e,n,r){let o=!1;if(t){const i=t(e[n],r,e,n);void 0!==i&&i!==q.stop&&i!==q.skip&&i!==q.delete&&(e[n]=i,o=!0),i===q.stop&&(u=!0),i===q.skip&&(o=!0),i===q.delete&&(e[n]=void 0,o=!0)}return o}}function V(t,e,n){if(!1===Array.isArray(n))return;let r=0,o=0,i=!0;for(let u=0;i||u<o;u++){const a=[];for(let t=0;t<n.length;t++){a[t]={...n[t]};for(const r of e)i&&(o=n[t]?.[r]?.length>o?n[t][r].length:o),a[t][r]=n[t]?.[r]?.[u]}0!==o&&(t(a,r),r++),i=!1}}function z(t,e,n=!0){const r=Symbol();let i;if(null==e)return e;if(Array.isArray(e))i=[];else{if(Object.getPrototypeOf(e)!==Object.prototype){if(!1===Array.isArray(t))throw new Error("paths must be an array");return t.filter((t=>"+$"===t)).length-t.filter((t=>"-$"===t)).length>0?e:void 0}i={}}for(const u of t){if("+"!==u[0]&&"-"!==u[0])throw new Error("ivanlid format");const t="+"===u[0],a=T({resultType:"all",path:u.substring(1),json:e}),s=new Map;for(const{pointer:e,value:u}of a){const a=e.substring(1).split("/");if(1===a.length&&""===a[0])i=t?o(u):void 0;else if(!0===n&&!1===t){const t=a.slice(0,-1),e=Ct(i,t);if(!0===Array.isArray(e))s.set(t.join("/"),e),Tt(i,a,r);else{delete e[a[a.length-1]],Tt(i,t,e)}}else Tt(i,a,t?o(u):void 0)}for(const[t,e]of s){const n=e.filter((t=>t!==r));Tt(i,t.split("/"),n)}}return i}function J(t,e,n=!1){return r=>(e.map((e=>{let o,i;"object"==typeof e?(o=e.from,i=e.to):(o=e,i=e);let u=Ct(r,o);"function"==typeof e.transform&&(u=e.transform(u)),null!=u&&(!0===n&&X(Ct(t,i))&&Tt(t,i,u),!1===n&&Tt(t,i,u))})),t)}function H(t,e=!1){return n=>(q(n,((n,r)=>{if(!1===K(n))return;if(null==n||1===r.length)return;const o=r.slice(1-r.length);if(!0!==e)Tt(t,o,n);else{X(Ct(t,o))&&Tt(t,o,n)}})),t)}function K(t){return!("Object"===t?.constructor.name&&Object.keys(t).length>0||"Array"===t?.constructor.name&&t.length>0)}function X(t){return!!(null==t||""===t||0===t||0n===t||Number.isNaN(t)||Array.isArray(t)&&0===t?.length||"object"==typeof t&&0===Object.keys(t).length)}function G(t){return"string"==typeof t?t[0].toUpperCase()+t.substring(1).toLowerCase():t}function Q(t){return Object.keys(t).reduce(((e,n)=>`${e?`${e}&`:e}${n}=${t[n]}`),"")}function Z(t,e,n){if("string"!=typeof t)return t;return t.replace(/"{{([^=}]+)(?:=([^}]+))?}}"/g,((t,r,o)=>{if(e&&void 0!==e[r]){if("string"==typeof e[r])return`"${e[r]}"`;if("object"==typeof e[r]){if("url"===n&&Array.isArray(e[r]))return tt(e[r]);if("url"===n&&!Array.isArray(e[r]))return et(e[r]);if(!n)return JSON.stringify(e[r])}return e[r]}return void 0===o?null:o.replace(/\\"/g,'"')})).replace(/{{([^=}]+)(?:=([^}]+))?}}/g,((t,r,o)=>e&&void 0!==e[r]?"object"!=typeof e[r]?e[r]:"url"===n&&Array.isArray(e[r])?tt(e[r]):"url"!==n||Array.isArray(e[r])?n?void 0:JSON.stringify(e[r]):et(e[r]):void 0===o?null:o.replace(/\\"/g,"")))}function tt(t){return t.reduce(((t,e)=>`${t},${e}`))}function et(t){return Object.keys(t).reduce(((e,n)=>`${e}${n}=${t[n]}&`),"").slice(0,-1)}function nt(t,e,n){return{gatewayUrl:t,serviceName:e,servicePath:n,url:`${t}${e}${n}`}}function rt(t,e){return e.filter((e=>t.split(e).length>=2)).map((e=>{const[n,...r]=t.split(e);return{gatewayUrl:n,serviceName:e,servicePath:r.join(e)}}))}function ot(t,e,n){if(n>0==!1)return-1;let r=-1;for(let o=0;o<n;o++)r=t.indexOf(e,r+1);return r}function it(t){return t?t instanceof Date?t:new Date(t):new Date}function ut(t){return t instanceof Date&&!Number.isNaN(t)}function at(t){return"string"==typeof t&&ut(new Date(t))}function st(t){return e=>ct(t,e)}function ct(t,e){const n=it(e);if(!1===ut(n))return;const r=new F({January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"}).invert(),o=new F({Sunday:"0",Monday:"1",Tuesday:"2",Wednesday:"3",Thursday:"4",Friday:"5",Saturday:"6"}).invert(),i=n.toISOString(),u=i.substring(0,4),a=i.substring(2,4),s=i.substring(5,7),c=i.substring(8,10),l=Number.parseInt(c,10).toString(),f=i.substring(11,13),p=Number.parseInt(f,10).toString(),h=i.substring(14,16),d=i.substring(17,19),y=i.substring(20,23),g=i.substring(20,22),v=r[s],m=o[n.getUTCDay()];return t.replace(/\$YYYY/g,u).replace(/\$YY/g,a).replace(/\$MM/g,s).replace(/\$DD/g,c).replace(/\$D/g,l).replace(/\$hh/g,f).replace(/\$h/g,p).replace(/\$mm/g,h).replace(/\$ss/g,d).replace(/\$mil/g,y).replace(/\$mi/g,g).replace(/\$month/g,v).replace(/\$dayOfWeek/g,m)}function lt(t){const e=Number.parseInt(t.substring(0,4)),n=Number.parseInt(t.substring(5,7))-1,r=Number.parseInt(t.substring(8,10)),o=Number.parseInt(t.substring(11,13)),i=Number.parseInt(t.substring(14,16)),u=Number.parseInt(t.substring(17,19));return Date.UTC(e,n,r,o,i,u)}q.skip=Symbol(),q.stop=Symbol(),q.delete=Symbol(),q.matchPath=(t,e)=>{const n=t.split(".");return n.length===e.length&&n.every(((t,n)=>"*"===t||t===e[n]))};const ft=new F(["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"]),pt=new F(["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"]);function ht(t){const e=it(t);if(!1===ut(e))return;const n=e.toISOString();return{YYYY:Number.parseInt(n.substring(0,4)),MM:Number.parseInt(n.substring(5,7)),DD:Number.parseInt(n.substring(8,10)),hh:Number.parseInt(n.substring(11,13)),mm:Number.parseInt(n.substring(14,16)),ss:Number.parseInt(n.substring(17,19)),mil:Number.parseInt(n.substring(20,23))}}function dt(t,e){return Math.ceil((new Date(e)-new Date(t))/864e5)}function yt(t,e){const n=it(e);return!1===ut(n)?n:new Date(n.valueOf()+864e5*t)}function gt(t,e){const n=it(e);return!1===ut(n)?n:new Date(n.valueOf()-864e5*t)}function vt(t,e){const n=it(e);if(!1===ut(n))return n;const r=n.getUTCDay()-t;return gt(r>=0?r:7+r,n)}function mt(t,e){const n=it(e);if(!1===ut(n))return n;const r=t-n.getUTCDay();return yt(r>=0?r:7+r,n)}function bt(t,e){const n=it(e);if(!1===ut(n))return n;return yt((0===t?7:t)-(0===n.getUTCDay()?7:n.getUTCDay()),n)}function wt(t){const e=it(t);if(!1===ut(e))return e;const n=e.getUTCDay();return n>0&&n<6?e:gt(0===n?2:1,e)}function Et(t){return"T00:00:00.000Z"===t?.toISOString?.()?.substring(10,24)}function _t(t){if("string"==typeof t&&t.match(/\d{4}\D\d{2}\D\d{2}/))return new Date(`${t.substring(0,10)} UTC`);if("string"==typeof t)return new Date(`${t} UTC`);const e=0===arguments.length?new Date:new Date(t);return Number.isNaN(+e)||Et(e)?e:new Date(`${e.toISOString().substring(0,10)} UTC`)}const{colors:xt,colorMessage:At,colorMessageByStatus:Ot,colorByStatus:Nt}=(()=>{const t={red:"[31m",green:"[32m",yellow:"[33m",cyan:"[36m",blue:"[34m",reset:"[0m",reverse:"[7m",fgBlack:"[30m",fgRed:"[31m",fgGreen:"[32m",fgYellow:"[33m",fgBlue:"[34m",fgMagenta:"[35m",fgCyan:"[36m",fgWhite:"[37m",bgBlack:"[40m",bgRed:"[41m",bgGreen:"[42m",bgYellow:"[43m",bgBlue:"[44m",bgMagenta:"[45m",bgCyan:"[46m",bgWhite:"[47m",bright:"[1m",dim:"[2m",underscore:"[4m",blink:"[5m",hidden:"[8m"};return{colors:t,colorMessage:(e,n)=>`${t[n]}${e}${t.reset}`,colorMessageByStatus:(e,n)=>n>=200&n<300?t.green:n>=300&n<400?t.cyan:n>=400&n<500?t.yellow:t.red,colorByStatus:e=>e>=200&e<300?t.green:e>=300&e<400?t.cyan:e>=400&e<500?t.yellow:t.red}})();function jt(t,e){const n=[],r=[];return function t(o){for(const i in o)i===e&&(r.push([...n]),r[r.length-1].push(i),r.push(o[i])),null!==o[i]&&"object"==typeof o[i]&&(n.push(i),t(o[i]),n.pop())}(t),r}function St(t){for(const e of Object.getOwnPropertyNames(t))null===t[e]||"object"!=typeof t[e]&&"function"!=typeof t[e]||St(t[e]);return Object.freeze(t),t}function Ct(t,e){if(null==t||null==e)return;if(""===e)return t;let n=t;const r="string"==typeof e?e.split("."):e;for(const t of r){if(void 0===n)return n;n=n instanceof Object?"$last"===t&&Array.isArray(n)?n[n.length-1]:n[t]:void 0}return n}function Tt(t,e,n){const r="CREATED",o="FAILED";let u,a=t,s=o;if(null==t||null==e)throw{name:"setAtParamsException",msg:`obj: ${t}, valuePath: ${e}, value: ${n}`};try{u="string"==typeof e?e.split("."):e;for(let t=0,e=u.length;t<e;t++){const e=c(a,u[t]);t===u.length-1?(void 0!==a?.[u[t]]?s!==r&&(s="MODIFIED"):s!==r&&(s="ADDED"),a[e]=n):("object"!=typeof a[e]&&(Number.isNaN(Number(u[t+1]))?a[e]={}:a[e]=[],s=r),a=a[e])}if(s===o)throw{name:"setAtException",msg:`obj: ${t}, valuePath: ${e}, value: ${n}`}}catch(r){return console.log(`${r} Warning: There was an exception in setAt(obj, valuePath, value)... obj: ${t} valuePath: ${e} value: ${n}`),s=o,s}return s;function c(t,e){return Array.isArray(t)&&"$last"===e?t.length-1:Array.isArray(t)&&"$push"===e?t.length:Array.isArray(t)&&Number.parseInt(e)<0?t.length+Number.parseInt(u[i]):e}}const It=t=>t.split(".").map((t=>{const e=Number(t);return Number.isNaN(e)?t:"*"})).join("."),$t=t=>"$."===t.substring(0,2)?t.substring(2):t,Rt=(t,e)=>null==t||Number.isNaN(t)?e:t,Dt=(t,e=!0)=>{let n,r=1,o=-1,i=Number.POSITIVE_INFINITY;return!1===e&&(r=-1,o=1,i=Number.NEGATIVE_INFINITY),n="string"==typeof t?[t]:[...t],(t,e)=>{for(const u of n){if(Rt(Ct(t,u),i)>Rt(Ct(e,u),i))return r;if(Rt(Ct(t,u),i)<Rt(Ct(e,u),i))return o}return 0}},Pt=(t,e=!0)=>{let n,r=e;return!1===Array.isArray(e)&&(r=Array(t.length).fill(e)),n="string"==typeof t?[t]:[...t],(t,e)=>{let o,i,u,a;for(let s=0;s<n.length;s++){if(a=n[s],o=1,i=-1,u=Number.POSITIVE_INFINITY,!1===r[s]&&(o=-1,i=1,u=Number.NEGATIVE_INFINITY),Rt(Ct(t,a),u)>Rt(Ct(e,a),u))return o;if(Rt(Ct(t,a),u)<Rt(Ct(e,a),u))return i}return 0}};function kt(t,e){if(void 0===t?.length||0===t?.length)return-1;let n=0,r=t.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),i=t[o];if(i>e)r=o-1;else{if(!(i<e))return o;n=o+1}}return-1}function Mt(t,e){let n=0,r=t.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),i=t[o];if(i<e)n=o+1;else{if(!(i>e))return o;r=o-1}}return r}function Ut(t,e){let n=0,r=t.length-1;for(;n<=r;){const o=Math.floor((n+r)/2),i=t[o];if(i<e)n=o+1;else{if(!(i>e))return o;r=o-1}}return n===t.length?-1:n}function Ft(t,e){const n=[];let r,o=0;for(let i=0,u=e.length;i<u;i++)if(r=t(e[i],i,e),void 0!==r)if(!0===Array.isArray(r))for(let t=0,e=r.length;t<e;t++)void 0!==r[t]&&(n[o++]=r[t]);else n[o++]=r;return n}const Lt=(t=!0)=>(e,n)=>!1===t?e<n?1:e>n?-1:0:e<n?-1:e>n?1:0;function Bt(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}function Yt(t){return new Promise((e=>setTimeout(e,t)))}function Wt(t,e){return new Promise((n=>setTimeout((()=>n(e)),t)))}function qt(t,e,...n){return new Promise((r=>setTimeout((()=>r(e(...n))),t)))}async function Vt(t,e,n,r,o,i){let u,a=0;for(let s=0;s<t;s++){s>0&&await Yt(a);try{u=await n(...r)}catch(e){if(s===t-1)throw e;u=e}if(void 0===o&&u instanceof Error==!1)return u;try{if(!0===o?.(u))return u}catch(t){throw console.log(`Called to shouldStopFun failed with params: ${a}, ${s}`),console.log(`Log from caller to retryFunction: ${i}`),console.log("Throwing exception..."),t}const c=u?.message??u?.error??u?.code??u?.status??u?.status??u?.name;console.log(`Iteration: ${s+1} sleepTime: ${a} Error: ${c}`),console.log(`Log from caller to retryFunction: ${i}`);try{a=e(a,s)}catch(t){throw console.log(`Calling updateSleepTimeFun failed with params: ${a}, ${s}`),console.log(`Log from caller to retryFunction: ${i}`),t}}return u}const zt=t=>(...e)=>!t(...e);function Jt(t,e,n=[0]){const r=o(t,n);return void 0===e.find((t=>o(t,n)===r))?(e.push(t),t):void 0;function o(t,e){return"object"!=typeof t?t:e.reduce(((e,n,r)=>`${e}-${r}-${t[n]}`),"")}}function Ht(t,e,n=[0],r){if(void 0===Jt(t,e,n)){const i=o(t,n);return e.map((e=>i===o(e,n)?r(t,e):e))}return e;function o(t,e){return"object"!=typeof t?t:e.reduce(((e,n,r)=>`${e}-${r}-${t[n]}`),"")}}function Kt(t,e,n){if(!1===Array.isArray(n))throw new P("PUSHAT_LAST_PARAMETER_MUST_BE_ARRAY");const r=n.length;return ee(n.length-t).times((t=>{n[r-t]=n[r-t-1]})),n[t]=e,n}function Xt(){const t=new Map;return{memoizeMap:function(e,...n){const r=JSON.stringify(n);let o=t.get(r);return void 0===o&&!1===t.has(r)&&(o=e(...n),t.set(r,o)),o},memoizeWithHashFun:function(e,n,...r){const o=JSON.stringify(n(r));let i=t.get(o);return void 0===i&&!1===t.has(o)&&(i=e(...r),t.set(o,i)),i}}}function Gt(t,e){const n=[],r="function"==typeof e?e:t=>t<e;let o,i=-1;do{i++,n[i]=t(i,n),o=r(i,n),o||n.pop()}while(o);return n}function Qt(t,e,n){return t.toFixed(n).padStart(e+n+1,"0")}function Zt(t,...e){let n=e;return void 0!==e[0][0].from&&(n=e[0]),n.reduce(((t,e)=>t.split(e.from).join(e.to)),t)}function te(t){return t.replace(/([^a-z0-9 .,]+)/gi,"").replace(/ +/g," ").trim()}function ee(t){const e=[];let n=!1;return{times:function(r){for(let o=0;o<t&&!1===n;o++)e[o]=r(o);return e},awaitTimes:async function(r){for(let o=0;o<t&&!1===n;o++)e[o]=await r(o);return e},value:function(e){return Array(t).fill(e)},breakNextIteration:function(){n=!0}}}function ne(t,e=!0){let n=e?0:t-1;return{call:function(e){function r(...r){if(0===n)return n=t-1,e(...r);n--}return r.reset=(e=!0)=>{n=e?0:t-1},r.stop=()=>{n=Number.POSITIVE_INFINITY},r}}}function*re(t,e){let n=0;for(;;)yield t+n%e,n++}function oe(t){console.log(`Shutting down with error: ${t}`);try{process.exit(1)}catch(t){console.log(t)}}const ie={logWithPrefix:$,firstCapital:G,varSubsDoubleBracket:Z,queryObjToStr:Q,summarizeError:D,CustomError:P,createCustomErrorClass:k,isBasicType:M,urlCompose:nt,urlDecompose:rt,indexOfNthMatch:ot,colors:xt,colorMessage:At,colorMessageByStatus:Ot,colorByStatus:Nt,findDeepKey:jt,deepFreeze:St,getAt:Ct,setAt:Tt,pathReplacingArrayIndexWithAsterisk:It,stripDollarRoot:$t,sorterByPaths:Dt,sorterByFields:Pt,findIndexInSortedArray:kt,findIndexOrPreviousInSortedArray:Mt,findIndexOrNextInSortedArray:Ut,defaultValue:Rt,filterFlatMap:Ft,arraySorter:Lt,isPromise:Bt,sleep:Yt,sleepWithValue:Wt,sleepWithFunction:qt,notTo:zt,arrayToObject:B,arrayOfObjectsToObject:Y,removeDuplicates:W,traverse:q,traverseVertically:V,project:z,copyPropsWithValue:H,copyPropsWithValueUsingRules:J,EnumMap:F,Enum:U,transition:L,pushUniqueKey:Jt,pushUniqueKeyOrChange:Ht,pushAt:Kt,memoize:Xt,fillWith:Gt,numberToFixedString:Qt,isDate:ut,isEmpty:X,isALeaf:K,isStringADate:at,formatDate:ct,DAYS:ft,MONTHS:pt,dateFormatter:st,YYYY_MM_DD_hh_mm_ss_ToUtcDate:lt,dateToObj:ht,diffInDaysYYYY_MM_DD:dt,subtractDays:gt,addDays:yt,previousDayOfWeek:vt,nextDayOfWeek:mt,dayOfWeek:bt,getSameDateOrPreviousFridayForWeekends:wt,isDateMidnight:Et,setDateToMidnight:_t,replaceAll:Zt,cleanString:te,repeat:ee,oneIn:ne,loopIndexGenerator:re,retryWithSleep:Vt,processExit:oe};function ue(t,e,n,r){if(n){Object.setPrototypeOf(t,Object.getPrototypeOf(e));for(let e in t)t.hasOwnProperty(e)&&delete t[e]}if(r)for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);else for(let n in e)e.hasOwnProperty(n)&&(t[n]=o(e[n]));return t}function ae(t,e,n=".",r=!0,o=!0){let i=n.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&");let u=t.split(n).join(`${i}`);return u=u.split("*").join(`[^${i}]*`),u=u.split(`[^${i}]*[^${i}]*`).join(".*"),u=`${r?"^":""}${u}${o?"$":""}`,new RegExp(u,e)}function se(t){let e=function t(e){const n=[],r=[];return ie.traverse(e,((t,e,o,i)=>{ie.isPromise(t)&&(n.push(t),r.push({parent:o,son:i}))}),!1),n.length>0?Promise.all(n).then((n=>(n.map(((t,e)=>{r[e].parent[r[e].son]=t})),t(e)))):e}({root:t});return!1===ie.isPromise(e)&&(e=Promise.resolve(e)),e.then((t=>t.root))}var ce={"@@functional/placeholder":!0};function le(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function fe(t){return function e(n){return 0===arguments.length||le(n)?e:t.apply(this,arguments)}}function pe(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return le(n)?e:fe((function(e){return t(n,e)}));default:return le(n)&&le(r)?e:le(n)?fe((function(e){return t(e,r)})):le(r)?fe((function(e){return t(n,e)})):t(n,r)}}}var he=pe((function(t,e){return Number(t)+Number(e)}));function de(t,e){var n;e=e||[];var r=(t=t||[]).length,o=e.length,i=[];for(n=0;n<r;)i[i.length]=t[n],n+=1;for(n=0;n<o;)i[i.length]=e[n],n+=1;return i}function ye(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,o){return e.apply(this,arguments)};case 5:return function(t,n,r,o,i){return e.apply(this,arguments)};case 6:return function(t,n,r,o,i,u){return e.apply(this,arguments)};case 7:return function(t,n,r,o,i,u,a){return e.apply(this,arguments)};case 8:return function(t,n,r,o,i,u,a,s){return e.apply(this,arguments)};case 9:return function(t,n,r,o,i,u,a,s,c){return e.apply(this,arguments)};case 10:return function(t,n,r,o,i,u,a,s,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ge(t,e,n){return function(){for(var r=[],o=0,i=t,u=0;u<e.length||o<arguments.length;){var a;u<e.length&&(!le(e[u])||o>=arguments.length)?a=e[u]:(a=arguments[o],o+=1),r[u]=a,le(a)||(i-=1),u+=1}return i<=0?n.apply(this,r):ye(i,ge(t,r,n))}}var ve=pe((function(t,e){return 1===t?fe(e):ye(t,ge(t,[],e))})),me=fe((function(t){return ve(t.length,(function(){var e=0,n=arguments[0],r=arguments[arguments.length-1],o=Array.prototype.slice.call(arguments,0);return o[0]=function(){var t=n.apply(this,de(arguments,[e,r]));return e+=1,t},t.apply(this,o)}))}));function be(t){return function e(n,r,o){switch(arguments.length){case 0:return e;case 1:return le(n)?e:pe((function(e,r){return t(n,e,r)}));case 2:return le(n)&&le(r)?e:le(n)?pe((function(e,n){return t(e,r,n)})):le(r)?pe((function(e,r){return t(n,e,r)})):fe((function(e){return t(n,r,e)}));default:return le(n)&&le(r)&&le(o)?e:le(n)&&le(r)?pe((function(e,n){return t(e,n,o)})):le(n)&&le(o)?pe((function(e,n){return t(e,r,n)})):le(r)&&le(o)?pe((function(e,r){return t(n,e,r)})):le(n)?fe((function(e){return t(e,r,o)})):le(r)?fe((function(e){return t(n,e,o)})):le(o)?fe((function(e){return t(n,r,e)})):t(n,r,o)}}}var we=be((function(t,e,n){var r=n.length;if(t>=r||t<-r)return n;var o=(r+t)%r,i=de(n);return i[o]=e(n[o]),i})),Ee=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function _e(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function xe(t,e,n){return function(){if(0===arguments.length)return n();var r=arguments[arguments.length-1];if(!Ee(r)){for(var o=0;o<t.length;){if("function"==typeof r[t[o]])return r[t[o]].apply(r,Array.prototype.slice.call(arguments,0,-1));o+=1}if(_e(r))return e.apply(null,Array.prototype.slice.call(arguments,0,-1))(r)}return n.apply(this,arguments)}}function Ae(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var Oe={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},Ne=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=Ae(this.xf["@@transducer/step"](t,!1))),t},t}(),je=pe(xe(["all"],pe((function(t,e){return new Ne(t,e)})),(function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0}))),Se=pe((function(t,e){return e>t?e:t}));function Ce(t,e){for(var n=0,r=e.length,o=Array(r);n<r;)o[n]=t(e[n]),n+=1;return o}function Te(t){return"[object String]"===Object.prototype.toString.call(t)}var Ie=fe((function(t){return!!Ee(t)||!!t&&("object"==typeof t&&(!Te(t)&&(0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))})),$e=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();function Re(t){return new $e(t)}var De=pe((function(t,e){return ye(t.length,(function(){return t.apply(e,arguments)}))}));function Pe(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function ke(t,e,n,r){return t["@@transducer/result"](n[r](De(t["@@transducer/step"],t),e))}var Me="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function Ue(t,e,n){if("function"==typeof t&&(t=Re(t)),Ie(n))return function(t,e,n){for(var r=0,o=n.length;r<o;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return ke(t,e,n,"fantasy-land/reduce");if(null!=n[Me])return Pe(t,e,n[Me]());if("function"==typeof n.next)return Pe(t,e,n);if("function"==typeof n.reduce)return ke(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Fe=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},t}(),Le=pe((function(t,e){return new Fe(t,e)}));function Be(t,e){return Object.prototype.hasOwnProperty.call(e,t)}var Ye=Object.prototype.toString,We=function(){return"[object Arguments]"===Ye.call(arguments)?function(t){return"[object Arguments]"===Ye.call(t)}:function(t){return Be("callee",t)}}(),qe=!{toString:null}.propertyIsEnumerable("toString"),Ve=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ze=function(){return arguments.propertyIsEnumerable("length")}(),Je=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},He="function"!=typeof Object.keys||ze?fe((function(t){if(Object(t)!==t)return[];var e,n,r=[],o=ze&&We(t);for(e in t)!Be(e,t)||o&&"length"===e||(r[r.length]=e);if(qe)for(n=Ve.length-1;n>=0;)Be(e=Ve[n],t)&&!Je(r,e)&&(r[r.length]=e),n-=1;return r})):fe((function(t){return Object(t)!==t?[]:Object.keys(t)})),Ke=pe(xe(["fantasy-land/map","map"],Le,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return ve(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return Ue((function(n,r){return n[r]=t(e[r]),n}),{},He(e));default:return Ce(t,e)}}))),Xe=Number.isInteger||function(t){return t<<0===t},Ge=pe((function(t,e){var n=t<0?e.length+t:t;return Te(e)?e.charAt(n):e[n]})),Qe=pe((function(t,e){if(null!=e)return Xe(t)?Ge(t,e):e[t]})),Ze=pe((function(t,e){return Ke(Qe(t),e)})),tn=be(Ue),en=fe((function(t){return ve(tn(Se,0,Ze("length",t)),(function(){for(var e=0,n=t.length;e<n;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0}))})),nn=fe((function(t){return function(){return t}})),rn=pe((function(t,e){return t&&e})),on=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=Ae(this.xf["@@transducer/step"](t,!0))),t},t}(),un=pe(xe(["any"],pe((function(t,e){return new on(t,e)})),(function(t,e){for(var n=0;n<e.length;){if(t(e[n]))return!0;n+=1}return!1}))),an=fe((function(t){return ve(tn(Se,0,Ze("length",t)),(function(){for(var e=0,n=t.length;e<n;){if(t[e].apply(this,arguments))return!0;e+=1}return!1}))})),sn=pe((function(t,e){return"function"==typeof e["fantasy-land/ap"]?e["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(e):"function"==typeof t?function(n){return t(n)(e(n))}:Ue((function(t,n){return de(t,Ke(n,e))}),[],t)}));function cn(t,e){for(var n=0,r=e.length-(t-1),o=new Array(r>=0?r:0);n<r;)o[n]=Array.prototype.slice.call(e,n,n+t),n+=1;return o}var ln=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.store(e),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return de(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))},t}(),fn=pe(xe([],pe((function(t,e){return new ln(t,e)})),cn)),pn=pe((function(t,e){return de(e,[t])})),hn=pe((function(t,e){return t.apply(this,e)})),dn=fe((function(t){for(var e=He(t),n=e.length,r=[],o=0;o<n;)r[o]=t[e[o]],o+=1;return r}));function yn(t,e){return Ee(e)?e.map(t):He(e).reduce((function(n,r){return n[r]=t(e[r]),n}),{})}var gn=fe((function t(e){return e=yn((function(e){return"function"==typeof e?e:t(e)}),e),ve(tn(Se,0,Ze("length",dn(e))),(function(){var t=arguments;return yn((function(e){return hn(e,t)}),e)}))})),vn=pe((function(t,e){return e(t)})),mn=be((function(t,e,n){var r=t(e),o=t(n);return r<o?-1:r>o?1:0}));function bn(t,e,n){if(Xe(t)&&Ee(n)){var r=[].concat(n);return r[t]=e,r}var o={};for(var i in n)o[i]=n[i];return o[t]=e,o}var wn=fe((function(t){return null==t})),En=be((function t(e,n,r){if(0===e.length)return n;var o=e[0];if(e.length>1){var i=!wn(r)&&Be(o,r)?r[o]:Xe(e[1])?[]:{};n=t(Array.prototype.slice.call(e,1),n,i)}return bn(o,n,r)})),_n=be((function(t,e,n){return En([t],e,n)})),xn=pe((function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,o){return e.call(this,t,n,r,o)};case 5:return function(t,n,r,o,i){return e.call(this,t,n,r,o,i)};case 6:return function(t,n,r,o,i,u){return e.call(this,t,n,r,o,i,u)};case 7:return function(t,n,r,o,i,u,a){return e.call(this,t,n,r,o,i,u,a)};case 8:return function(t,n,r,o,i,u,a,s){return e.call(this,t,n,r,o,i,u,a,s)};case 9:return function(t,n,r,o,i,u,a,s,c){return e.call(this,t,n,r,o,i,u,a,s,c)};case 10:return function(t,n,r,o,i,u,a,s,c,l){return e.call(this,t,n,r,o,i,u,a,s,c,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),An=fe((function(t){return xn(2,t)}));function On(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e}var Nn=pe((function(t,e){var n=ve(t,e);return ve(t,(function(){return Ue(sn,Ke(n,arguments[0]),Array.prototype.slice.call(arguments,1))}))})),jn=fe((function(t){return Nn(t.length,t)})),Sn=pe((function(t,e){return On(t)?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:jn(rn)(t,e)})),Cn=fe((function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))}));function Tn(t){return function e(n){for(var r,o,i,u=[],a=0,s=n.length;a<s;){if(Ie(n[a]))for(i=0,o=(r=t?e(n[a]):n[a]).length;i<o;)u[u.length]=r[i],i+=1;else u[u.length]=n[a];a+=1}return u}}var In=function(t){var e=function(t){return{"@@transducer/init":Oe.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":Oe.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){return Ie(n)?Ue(e,t,n):Ue(e,t,[n])}}},$n=pe(xe(["fantasy-land/chain","chain"],pe((function(t,e){return Ke(t,In(e))})),(function(t,e){return"function"==typeof e?function(n){return t(e(n))(n)}:Tn(!1)(Ke(t,e))}))),Rn=be((function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n}));function Dn(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var Pn=fe((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));function kn(t,e,n,r){var o=function(o){for(var i=e.length,u=0;u<i;){if(t===e[u])return n[u];u+=1}for(var a in e[u]=t,n[u]=o,t)t.hasOwnProperty(a)&&(o[a]=r?kn(t[a],e,n,!0):t[a]);return o};switch(Pn(t)){case"Object":return o(Object.create(Object.getPrototypeOf(t)));case"Array":return o([]);case"Date":return new Date(t.valueOf());case"RegExp":return Dn(t);case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":return t.slice();default:return t}}var Mn=fe((function(t){return null!=t&&"function"==typeof t.clone?t.clone():kn(t,[],[],!0)})),Un=pe((function(t,e){var n=Ue((function(e,n){var r=t(n);return void 0===e[r]&&(e[r]=[]),e[r].push(n),e}),{},e),r=[];for(var o in n)r.push(n[o]);return r})),Fn=fe((function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}})),Ln=fe((function(t){return!t})),Bn=jn(Ln);function Yn(t,e){return function(){return e.call(this,t.apply(this,arguments))}}function Wn(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return Ee(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,Array.prototype.slice.call(arguments,0,n-1))}}var qn=be(Wn("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)}))),Vn=fe(Wn("tail",qn(1,1/0)));function zn(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return ye(arguments[0].length,tn(Yn,arguments[0],Vn(arguments)))}var Jn=fe((function(t){return Te(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));function Hn(){if(0===arguments.length)throw new Error("compose requires at least one argument");return zn.apply(this,Jn(arguments))}var Kn=Ge(0);function Xn(t){return t}var Gn=fe(Xn),Qn=pe((function(t,e){if(e.length<=0)return Gn;var n=Kn(e),r=Vn(e);return ye(n.length,(function(){return Ue((function(e,n){return t.call(this,n,e)}),n.apply(this,arguments),r)}))})),Zn=pe((function(t,e){return Qn.apply(this,[t,Jn(e)])}));function tr(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function er(t,e,n){for(var r=0,o=n.length;r<o;){if(t(e,n[r]))return!0;r+=1}return!1}var nr="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};function rr(t,e,n,r){var o=tr(t);function i(t,e){return or(t,e,n.slice(),r.slice())}return!er((function(t,e){return!er(i,e,t)}),tr(e),o)}function or(t,e,n,r){if(nr(t,e))return!0;var o=Pn(t);if(o!==Pn(e))return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(o){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!nr(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!nr(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var i=n.length-1;i>=0;){if(n[i]===t)return r[i]===e;i-=1}switch(o){case"Map":return t.size===e.size&&rr(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&rr(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=He(t);if(u.length!==He(e).length)return!1;var a=n.concat([t]),s=r.concat([e]);for(i=u.length-1;i>=0;){var c=u[i];if(!Be(c,e)||!or(e[c],t[c],a,s))return!1;i-=1}return!0}var ir=pe((function(t,e){return or(t,e,[],[])}));function ur(t,e,n){var r,o;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(o=t[n])&&1/o===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(o=t[n])&&o!=o)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(ir(t[n],e))return n;n+=1}return-1}function ar(t,e){return ur(e,t,0)>=0}function sr(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var cr=function(t){return(t<10?"0":"")+t},lr="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+cr(t.getUTCMonth()+1)+"-"+cr(t.getUTCDate())+"T"+cr(t.getUTCHours())+":"+cr(t.getUTCMinutes())+":"+cr(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function fr(t){return function(){return!t.apply(this,arguments)}}function pr(t,e){for(var n=0,r=e.length,o=[];n<r;)t(e[n])&&(o[o.length]=e[n]),n+=1;return o}function hr(t){return"[object Object]"===Object.prototype.toString.call(t)}var dr=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),yr=pe(xe(["fantasy-land/filter","filter"],pe((function(t,e){return new dr(t,e)})),(function(t,e){return hr(e)?Ue((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},He(e)):pr(t,e)}))),gr=pe((function(t,e){return yr(fr(t),e)}));function vr(t,e){var n=function(n){var r=e.concat([t]);return ar(n,r)?"<Circular>":vr(n,r)},r=function(t,e){return Ce((function(e){return sr(e)+": "+n(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+Ce(n,t).join(", ")+"))";case"[object Array]":return"["+Ce(n,t).concat(r(t,gr((function(t){return/^\d+$/.test(t)}),He(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+n(t.valueOf())+")":t.toString();case"[object Date]":return"new Date("+(isNaN(t.valueOf())?n(NaN):sr(lr(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+n(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+n(t.valueOf())+")":sr(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var o=t.toString();if("[object Object]"!==o)return o}return"{"+r(t,He(t)).join(", ")+"}"}}var mr=fe((function(t){return vr(t,[])})),br=pe((function(t,e){if(Ee(t)){if(Ee(e))return t.concat(e);throw new TypeError(mr(e)+" is not an array")}if(Te(t)){if(Te(e))return t+e;throw new TypeError(mr(e)+" is not a string")}if(null!=t&&On(t["fantasy-land/concat"]))return t["fantasy-land/concat"](e);if(null!=t&&On(t.concat))return t.concat(e);throw new TypeError(mr(t)+' does not have a method named "concat" or "fantasy-land/concat"')})),wr=fe((function(t){var e=tn(Se,0,Ke((function(t){return t[0].length}),t));return ye(e,(function(){for(var e=0;e<t.length;){if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments);e+=1}}))})),Er=fe((function(t){return ve(t.length,t)})),_r=pe((function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:Er(xn(t,(function(t,n,r,o,i,u,a,s,c,l){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);case 4:return new e(t,n,r,o);case 5:return new e(t,n,r,o,i);case 6:return new e(t,n,r,o,i,u);case 7:return new e(t,n,r,o,i,u,a);case 8:return new e(t,n,r,o,i,u,a,s);case 9:return new e(t,n,r,o,i,u,a,s,c);case 10:return new e(t,n,r,o,i,u,a,s,c,l)}})))})),xr=fe((function(t){return _r(t.length,t)})),Ar=pe((function(t,e){return ve(tn(Se,0,Ze("length",e)),(function(){var n=arguments,r=this;return t.apply(r,Ce((function(t){return t.apply(r,n)}),e))}))})),Or=Er((function(t,e){return Ue((function(e,n){return t(n)?e+1:e}),0,e)})),Nr=function(){function t(t,e,n,r){this.valueFn=t,this.valueAcc=e,this.keyFn=n,this.xf=r,this.inputs={}}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(Be(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.keyFn(e);return this.inputs[n]=this.inputs[n]||[n,this.valueAcc],this.inputs[n][1]=this.valueFn(this.inputs[n][1],e),t},t}(),jr=ge(4,[],xe([],ge(4,[],(function(t,e,n,r){return new Nr(t,e,n,r)})),(function(t,e,n,r){return Ue((function(r,o){var i=n(o),u=t(Be(i,r)?r[i]:kn(e,[],[],!1),o);return u&&u["@@transducer/reduced"]?Ae(r):(r[i]=u,r)}),{},r)}))),Sr=jr((function(t,e){return t+1}),0),Cr=he(-1),Tr=pe((function(t,e){return null==e||e!=e?t:e})),Ir=be((function(t,e,n){var r=t(e),o=t(n);return r>o?-1:r<o?1:0})),$r=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}return t.prototype.add=function(t){return!Rr(t,!0,this)},t.prototype.has=function(t){return Rr(t,!1,this)},t}();function Rr(t,e,n){var r,o=typeof t;switch(o){case"string":case"number":return 0===t&&1/t==-1/0?!!n._items["-0"]||(e&&(n._items["-0"]=!0),!1):null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):o in n._items?t in n._items[o]||(e&&(n._items[o][t]=!0),!1):(e&&(n._items[o]={},n._items[o][t]=!0),!1);case"boolean":if(o in n._items){var i=t?1:0;return!!n._items[o][i]||(e&&(n._items[o][i]=!0),!1)}return e&&(n._items[o]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size===r):n._nativeSet.has(t):o in n._items?!!ar(t,n._items[o])||(e&&n._items[o].push(t),!1):(e&&(n._items[o]=[t]),!1);case"undefined":return!!n._items[o]||(e&&(n._items[o]=!0),!1);case"object":if(null===t)return!!n._items.null||(e&&(n._items.null=!0),!1);default:return(o=Object.prototype.toString.call(t))in n._items?!!ar(t,n._items[o])||(e&&n._items[o].push(t),!1):(e&&(n._items[o]=[t]),!1)}}var Dr=pe((function(t,e){for(var n=[],r=0,o=t.length,i=e.length,u=new $r,a=0;a<i;a+=1)u.add(e[a]);for(;r<o;)u.add(t[r])&&(n[n.length]=t[r]),r+=1;return n})),Pr=be((function(t,e,n){for(var r=[],o=0,i=e.length;o<i;)er(t,e[o],n)||er(t,e[o],r)||r.push(e[o]),o+=1;return r})),kr=be((function(t,e,n){var r=Array.prototype.slice.call(n,0);return r.splice(t,e),r}));var Mr=pe((function t(e,n){if(null==n)return n;switch(e.length){case 0:return n;case 1:return function(t,e){if(null==e)return e;if(Xe(t)&&Ee(e))return kr(t,1,e);var n={};for(var r in e)n[r]=e[r];return delete n[t],n}(e[0],n);default:var r=e[0],o=Array.prototype.slice.call(e,1);return null==n[r]?function(t,e){if(Xe(t)&&Ee(e))return[].concat(e);var n={};for(var r in e)n[r]=e[r];return n}(r,n):_n(r,t(o,n[r]),n)}})),Ur=pe((function(t,e){return Mr([t],e)})),Fr=pe((function(t,e){return t/e})),Lr=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},t}(),Br=pe(xe(["drop"],pe((function(t,e){return new Lr(t,e)})),(function(t,e){return qn(Math.max(0,t),1/0,e)}))),Yr=function(){function t(t,e){this.xf=e,this.n=t,this.i=0}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){this.i+=1;var n=0===this.n?t:this.xf["@@transducer/step"](t,e);return this.n>=0&&this.i>=this.n?Ae(n):n},t}(),Wr=pe(xe(["take"],pe((function(t,e){return new Yr(t,e)})),(function(t,e){return qn(0,t<0?1/0:t,e)})));function qr(t,e){return Wr(t<e.length?e.length-t:0,e)}var Vr=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(e),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t}(),zr=pe(xe([],pe((function(t,e){return new Vr(t,e)})),qr));function Jr(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return qn(0,n+1,e)}var Hr=function(){function t(t,e){this.f=t,this.retained=[],this.xf=e}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.retain(t,e):this.flush(t,e)},t.prototype.flush=function(t,e){return t=Ue(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,e)},t.prototype.retain=function(t,e){return this.retained.push(e),t},t}(),Kr=pe(xe([],pe((function(t,e){return new Hr(t,e)})),Jr)),Xr=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(n=!0):this.seenFirstValue=!0,this.lastValue=e,n?t:this.xf["@@transducer/step"](t,e)},t}(),Gr=pe((function(t,e){return new Xr(t,e)})),Qr=Ge(-1),Zr=pe(xe([],Gr,(function(t,e){var n=[],r=1,o=e.length;if(0!==o)for(n[0]=e[0];r<o;)t(Qr(n),e[r])||(n[n.length]=e[r]),r+=1;return n}))),to=fe(xe([],Gr(ir),Zr(ir))),eo=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},t}(),no=pe(xe(["dropWhile"],pe((function(t,e){return new eo(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return qn(n,1/0,e)}))),ro=pe((function(t,e){return t||e})),oo=pe((function(t,e){return On(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:jn(ro)(t,e)}));var io=fe((function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():Ee(t)?[]:Te(t)?"":hr(t)?{}:We(t)?function(){return arguments}():function(t){var e=Object.prototype.toString.call(t);return"[object Uint8ClampedArray]"===e||"[object Int8Array]"===e||"[object Uint8Array]"===e||"[object Int16Array]"===e||"[object Uint16Array]"===e||"[object Int32Array]"===e||"[object Uint32Array]"===e||"[object Float32Array]"===e||"[object Float64Array]"===e||"[object BigInt64Array]"===e||"[object BigUint64Array]"===e}(t)?t.constructor.from(""):void 0})),uo=pe((function(t,e){return Br(t>=0?e.length-t:0,e)})),ao=pe((function(t,e){return ir(uo(t.length,e),t)})),so=be((function(t,e,n){return ir(t(e),t(n))})),co=be((function(t,e,n){return ir(e[t],n[t])})),lo=pe((function t(e,n){if(!hr(n)&&!Ee(n))return n;var r,o,i,u=n instanceof Array?[]:{};for(o in n)i=typeof(r=e[o]),u[o]="function"===i?r(n[o]):r&&"object"===i?t(r,n[o]):n[o];return u})),fo=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=Ae(this.xf["@@transducer/step"](t,e))),t},t}(),po=pe(xe(["find"],pe((function(t,e){return new fo(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return e[n];n+=1}}))),ho=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=Ae(this.xf["@@transducer/step"](t,this.idx))),t},t}(),yo=pe(xe([],pe((function(t,e){return new ho(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1}))),go=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},t}(),vo=pe(xe([],pe((function(t,e){return new go(t,e)})),(function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return e[n];n-=1}}))),mo=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},t}(),bo=pe(xe([],pe((function(t,e){return new mo(t,e)})),(function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return n;n-=1}return-1}))),wo=fe(Tn(!0)),Eo=fe((function(t){return ve(t.length,(function(e,n){var r=Array.prototype.slice.call(arguments,0);return r[0]=n,r[1]=e,t.apply(this,r)}))})),_o=pe(Wn("forEach",(function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e}))),xo=pe((function(t,e){for(var n=He(e),r=0;r<n.length;){var o=n[r];t(e[o],o,e),r+=1}return e})),Ao=fe((function(t){for(var e={},n=0;n<t.length;)e[t[n][0]]=t[n][1],n+=1;return e})),Oo=pe(Wn("groupBy",jr((function(t,e){return t.push(e),t}),[]))),No=pe((function(t,e){for(var n=[],r=0,o=e.length;r<o;){for(var i=r+1;i<o&&t(e[i-1],e[i]);)i+=1;n.push(e.slice(r,i)),r=i}return n})),jo=pe((function(t,e){return t>e})),So=pe((function(t,e){return t>=e})),Co=pe((function(t,e){if(0===t.length||wn(e))return!1;for(var n=e,r=0;r<t.length;){if(wn(n)||!Be(t[r],n))return!1;n=n[t[r]],r+=1}return!0})),To=pe((function(t,e){return Co([t],e)})),Io=pe((function(t,e){return!wn(e)&&t in e})),$o=pe(nr),Ro=be((function(t,e,n){return ve(Math.max(t.length,e.length,n.length),(function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)}))})),Do=he(1),Po=pe(ar),ko=jr((function(t,e){return e}),null),Mo=pe((function(t,e){return"function"!=typeof e.indexOf||Ee(e)?ur(e,t,0):e.indexOf(t)})),Uo=qn(0,-1),Fo=be((function(t,e,n){return pr((function(e){return er(t,e,n)}),e)})),Lo=be((function(t,e,n){t=t<n.length&&t>=0?t:n.length;var r=Array.prototype.slice.call(n,0);return r.splice(t,0,e),r})),Bo=be((function(t,e,n){return t=t<n.length&&t>=0?t:n.length,[].concat(Array.prototype.slice.call(n,0,t),e,Array.prototype.slice.call(n,t))})),Yo=function(){function t(t,e){this.xf=e,this.f=t,this.set=new $r}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return this.set.add(this.f(e))?this.xf["@@transducer/step"](t,e):t},t}(),Wo=pe(xe([],pe((function(t,e){return new Yo(t,e)})),(function(t,e){for(var n,r,o=new $r,i=[],u=0;u<e.length;)n=t(r=e[u]),o.add(n)&&i.push(r),u+=1;return i}))),qo=Wo(Gn),Vo=pe((function(t,e){var n,r;return t.length>e.length?(n=t,r=e):(n=e,r=t),qo(pr(Eo(ar)(n),r))})),zo=pe(Wn("intersperse",(function(t,e){for(var n=[],r=0,o=e.length;r<o;)r===o-1?n.push(e[r]):n.push(e[r],t),r+=1;return n})));var Jo="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var o=arguments[n];if(null!=o)for(var i in o)Be(i,o)&&(e[i]=o[i]);n+=1}return e},Ho=pe((function(t,e){var n={};return n[t]=e,n})),Ko={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":Xn},Xo={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":Xn},Go={"@@transducer/init":Object,"@@transducer/step":function(t,e){return Jo(t,Ie(e)?Ho(e[0],e[1]):e)},"@@transducer/result":Xn};var Qo=be((function(t,e,n){return _e(t)?Ue(e(t),t["@@transducer/init"](),n):Ue(e(function(t){if(_e(t))return t;if(Ie(t))return Ko;if("string"==typeof t)return Xo;if("object"==typeof t)return Go;throw new Error("Cannot create transformer for "+t)}(t)),kn(t,[],[],!1),n)})),Zo=fe((function(t){for(var e=He(t),n=e.length,r=0,o={};r<n;){var i=e[r],u=t[i],a=Be(u,o)?o[u]:o[u]=[];a[a.length]=i,r+=1}return o})),ti=fe((function(t){for(var e=He(t),n=e.length,r=0,o={};r<n;){var i=e[r];o[t[i]]=i,r+=1}return o})),ei=pe((function(t,e){return ve(t+1,(function(){var n=arguments[t];if(null!=n&&On(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(mr(n)+' does not have a method named "'+e+'"')}))})),ni=pe((function(t,e){return e instanceof t||null!=e&&(e.constructor===t||"Object"===t.name&&"object"==typeof e)})),ri=fe((function(t){return null!=t&&ir(t,io(t))})),oi=ei(1,"join"),ii=fe((function(t){return Ar((function(){return Array.prototype.slice.call(arguments,0)}),t)})),ui=fe((function(t){var e,n=[];for(e in t)n[n.length]=e;return n})),ai=pe((function(t,e){if("function"!=typeof e.lastIndexOf||Ee(e)){for(var n=e.length-1;n>=0;){if(ir(e[n],t))return n;n-=1}return-1}return e.lastIndexOf(t)}));function si(t){return"[object Number]"===Object.prototype.toString.call(t)}var ci=fe((function(t){return null!=t&&si(t.length)?t.length:NaN})),li=pe((function(t,e){return function(n){return function(r){return Ke((function(t){return e(t,r)}),n(t(r)))}}})),fi=be((function(t,e,n){return we(t,nn(e),n)})),pi=fe((function(t){return li(Ge(t),fi(t))})),hi=pe((function(t,e){return t.map((function(t){for(var n,r=e,o=0;o<t.length;){if(null==r)return;n=t[o],r=Xe(n)?Ge(n,r):r[n],o+=1}return r}))})),di=pe((function(t,e){return hi([t],e)[0]})),yi=fe((function(t){return li(di(t),En(t))})),gi=fe((function(t){return li(Qe(t),_n(t))})),vi=pe((function(t,e){return t<e})),mi=pe((function(t,e){return t<=e})),bi=be((function(t,e,n){for(var r=0,o=n.length,i=[],u=[e];r<o;)u=t(u[0],n[r]),i[r]=u[1],r+=1;return[u[0],i]})),wi=be((function(t,e,n){for(var r=n.length-1,o=[],i=[e];r>=0;)i=t(i[0],n[r]),o[r]=i[1],r-=1;return[i[0],o]})),Ei=pe((function(t,e){return Ue((function(n,r){return n[r]=t(e[r],r,e),n}),{},He(e))})),_i=pe((function(t,e){return e.match(t)||[]})),xi=pe((function(t,e){return Xe(t)?!Xe(e)||e<1?NaN:(t%e+e)%e:NaN})),Ai=be((function(t,e,n){return t(n)>t(e)?n:e})),Oi=tn(he,0),Ni=fe((function(t){return Oi(t)/t.length})),ji=fe((function(t){var e=t.length;if(0===e)return NaN;var n=2-e%2,r=(e-n)/2;return Ni(Array.prototype.slice.call(t,0).sort((function(t,e){return t<e?-1:t>e?1:0})).slice(r,r+n))})),Si=pe((function(t,e){var n={};return ye(e.length,(function(){var r=t.apply(this,arguments);return Be(r,n)||(n[r]=e.apply(this,arguments)),n[r]}))})),Ci=fe((function(t){return Jo.apply(null,[{}].concat(t))})),Ti=be((function(t,e,n){var r,o={};for(r in e)Be(r,e)&&(o[r]=Be(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)Be(r,n)&&!Be(r,o)&&(o[r]=n[r]);return o})),Ii=be((function t(e,n,r){return Ti((function(n,r,o){return hr(r)&&hr(o)?t(e,r,o):e(n,r,o)}),n,r)})),$i=pe((function(t,e){return Ii((function(t,e,n){return e}),t,e)})),Ri=pe((function(t,e){return Ii((function(t,e,n){return n}),t,e)})),Di=be((function(t,e,n){return Ii((function(e,n,r){return t(n,r)}),e,n)})),Pi=pe((function(t,e){return Jo({},e,t)})),ki=pe((function(t,e){return Jo({},t,e)})),Mi=be((function(t,e,n){return Ti((function(e,n,r){return t(n,r)}),e,n)})),Ui=pe((function(t,e){return e<t?e:t})),Fi=be((function(t,e,n){return t(n)<t(e)?n:e}));var Li=be((function t(e,n,r){if(!hr(r)&&!Ee(r)||0===e.length)return r;var o=e[0];if(!Be(o,r))return r;if(1===e.length)return function(t,e,n){if(Xe(t)&&Ee(n)){var r=[].concat(n);return r[t]=e(r[t]),r}var o={};for(var i in n)o[i]=n[i];return o[t]=e(o[t]),o}(o,n,r);var i=t(Array.prototype.slice.call(e,1),n,r[o]);return i===r[o]?r:bn(o,i,r)})),Bi=be((function(t,e,n){return Li([t],e,n)})),Yi=pe((function(t,e){return t%e})),Wi=be((function(t,e,n){var r=n.length,o=n.slice(),i=t<0?r+t:t,u=e<0?r+e:e,a=o.splice(i,1);return i<0||i>=n.length||u<0||u>=n.length?n:[].concat(o.slice(0,u)).concat(a).concat(o.slice(u,n.length))})),qi=pe((function(t,e){return t*e})),Vi=pe(((t,e)=>n=>t.call(this,Ri(e,n)))),zi=fe((function(t){return-t})),Ji=pe((function(t,e){return je(fr(t),e)})),Hi=fe((function(t){return ve(t<0?1:t+1,(function(){return Ge(t,arguments)}))})),Ki=be((function(t,e,n){return t(e(n))}));function Xi(t){return[t]}var Gi=fe(Xi),Qi=pe((function(t,e){for(var n={},r={},o=0,i=t.length;o<i;)r[t[o]]=1,o+=1;for(var u in e)r.hasOwnProperty(u)||(n[u]=e[u]);return n})),Zi=ge(4,[],(function(t,e,n,r){return t(e(n),e(r))})),tu=fe((function(t){var e,n=!1;return ye(t.length,(function(){return n?e:(n=!0,e=t.apply(this,arguments))}))}));function eu(t,e){if(null==e||!On(e.then))throw new TypeError("`"+t+"` expected a Promise, received "+vr(e,[]))}var nu=pe((function(t,e){return eu("otherwise",e),e.then(null,t)})),ru=function(t){return{value:t,map:function(e){return ru(e(t))}}},ou=be((function(t,e,n){return t((function(t){return ru(e(t))}))(n).value})),iu=pe((function(t,e){return[t,e]}));function uu(t){return pe((function(e,n){return ye(Math.max(0,e.length-n.length),(function(){return e.apply(this,t(n,arguments))}))}))}var au=uu(de),su=uu(Eo(de)),cu=ii([yr,gr]),lu=be((function(t,e,n){return ir(di(t,n),e)})),fu=be((function(t,e,n){return Tr(t,di(e,n))})),pu=be((function(t,e,n){return t(di(e,n))})),hu=pe((function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n})),du=pe((function(t,e){for(var n={},r=0,o=t.length;r<o;){var i=t[r];n[i]=e[i],r+=1}return n})),yu=pe((function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n})),gu=pe((function(t,e){return de([t],e)})),vu=tn(qi,1),mu=pe((function(t,e){return ve(e.length,(function(){for(var n=[],r=0;r<e.length;)n.push(e[r].call(this,arguments[r])),r+=1;return t.apply(this,n.concat(Array.prototype.slice.call(arguments,e.length)))}))})),bu=mu(Ce,[du,Gn]);function wu(t,e,n){return function(r){return e(n(t(r)))}}var Eu=function(){function t(t,e,n){this.xf=n,this.f=t,this.g=e}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,wu(this.f,this.g,e))},t}(),_u=be(xe(["fantasy-land/promap","promap"],be((function(t,e,n){return new Eu(t,e,n)})),wu)),xu=be((function(t,e,n){return ir(e,Qe(t,n))})),Au=be((function(t,e,n){return ni(t,Qe(e,n))})),Ou=be((function(t,e,n){return Tr(t,Qe(e,n))})),Nu=be((function(t,e,n){return t(Qe(e,n))})),ju=pe((function(t,e){return t.map((function(t){return di([t],e)}))})),Su=pe((function(t,e){if(!si(t)||!si(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n})),Cu=be((function(t,e,n){for(var r=n.length-1;r>=0;){if((e=t(n[r],e))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r-=1}return e})),Tu=ge(4,[],(function(t,e,n,r){return Ue((function(n,r){return t(n,r)?e(n,r):Ae(n)}),n,r)})),Iu=fe(Ae),$u=pe((function(t,e){var n,r=Number(e),o=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);o<r;)n[o]=t(o),o+=1;return n})),Ru=pe((function(t,e){return $u(nn(t),e)})),Du=be((function(t,e,n){return n.replace(t,e)})),Pu=be((function(t,e,n){for(var r=0,o=n.length,i=[e];r<o;)e=t(e,n[r]),i[r+1]=e,r+=1;return i})),ku=pe((function(t,e){return"function"==typeof e.sequence?e.sequence(t):Cu((function(t,e){return sn(Ke(gu,t),e)}),t([]),e)})),Mu=be((function(t,e,n){return ou(t,nn(e),n)})),Uu=pe((function(t,e){return Array.prototype.slice.call(e,0).sort(t)})),Fu=pe((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){var r=t(e),o=t(n);return r<o?-1:r>o?1:0}))})),Lu=pe((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){for(var r=0,o=0;0===r&&o<t.length;)r=t[o](e,n),o+=1;return r}))})),Bu=ei(1,"split"),Yu=pe((function(t,e){return[qn(0,t,e),qn(t,ci(e),e)]})),Wu=pe((function(t,e){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<e.length;)n.push(qn(r,r+=t,e));return n})),qu=pe((function(t,e){for(var n=0,r=e.length,o=[];n<r&&!t(e[n]);)o.push(e[n]),n+=1;return[o,Array.prototype.slice.call(e,n)]})),Vu=ge(2,[],(function(t,e){for(var n=[],r=[],o=0;o<e.length;o+=1)t(e[o])||r.push(e[o]),(o<e.length-1&&t(e[o+1])||o===e.length-1)&&r.length>0&&(n.push(r),r=[]);return n})),zu=pe((function(t,e){return ir(Wr(t.length,e),t)})),Ju=pe((function(t,e){return Number(t)-Number(e)})),Hu=pe((function(t,e){return br(Dr(t,e),Dr(e,t))})),Ku=be((function(t,e,n){return br(Pr(t,e,n),Pr(t,n,e))})),Xu=pe((function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return qn(n+1,1/0,e)})),Gu=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):Ae(t)},t}(),Qu=pe(xe(["takeWhile"],pe((function(t,e){return new Gu(t,e)})),(function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return qn(0,n,e)}))),Zu=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e),this.xf["@@transducer/step"](t,e)},t}(),ta=pe(xe([],pe((function(t,e){return new Zu(t,e)})),(function(t,e){return t(e),e})));var ea=pe((function(t,e){if(n=t,"[object RegExp]"!==Object.prototype.toString.call(n))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+mr(t));var n;return Dn(t).test(e)})),na=pe((function(t,e){return eu("andThen",e),e.then(t)})),ra=ei(0,"toLowerCase"),oa=fe((function(t){var e=[];for(var n in t)Be(n,t)&&(e[e.length]=[n,t[n]]);return e})),ia=fe((function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e})),ua=ei(0,"toUpperCase"),aa=ve(4,(function(t,e,n,r){return Ue(t("function"==typeof e?Re(e):e),n,r)})),sa=fe((function(t){for(var e=0,n=[];e<t.length;){for(var r=t[e],o=0;o<r.length;)void 0===n[o]&&(n[o]=[]),n[o].push(r[o]),o+=1;e+=1}return n})),ca=be((function(t,e,n){return"function"==typeof n["fantasy-land/traverse"]?n["fantasy-land/traverse"](e,t):"function"==typeof n.traverse?n.traverse(e,t):ku(t,Ke(e,n))})),la="\t\n\v\f\r                　\u2028\u2029\ufeff",fa=fe("function"==typeof String.prototype.trim&&!la.trim()&&"​".trim()?function(t){return t.trim()}:function(t){var e=new RegExp("^["+la+"]["+la+"]*"),n=new RegExp("["+la+"]["+la+"]*$");return t.replace(e,"").replace(n,"")}),pa=pe((function(t,e){return ye(t.length,(function(){try{return t.apply(this,arguments)}catch(t){return e.apply(this,de([t],arguments))}}))})),ha=fe((function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}})),da=fe((function(t){return xn(1,t)})),ya=pe((function(t,e){return ve(t,(function(){for(var n,r=1,o=e,i=0;r<=t&&"function"==typeof o;)n=r===t?arguments.length:i+o.length,o=o.apply(this,Array.prototype.slice.call(arguments,i,n)),r+=1,i=n;return o}))})),ga=pe((function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r})),va=pe(Hn(qo,de)),ma=function(){function t(t,e){this.xf=e,this.pred=t,this.items=[]}return t.prototype["@@transducer/init"]=Oe.init,t.prototype["@@transducer/result"]=Oe.result,t.prototype["@@transducer/step"]=function(t,e){return er(this.pred,e,this.items)?t:(this.items.push(e),this.xf["@@transducer/step"](t,e))},t}(),ba=pe(xe([],pe((function(t,e){return new ma(t,e)})),(function(t,e){for(var n,r=0,o=e.length,i=[];r<o;)er(t,n=e[r],i)||(i[i.length]=n),r+=1;return i}))),wa=be((function(t,e,n){return ba(t,de(e,n))})),Ea=be((function(t,e,n){return t(n)?n:e(n)})),_a=$n(Xn),xa=be((function(t,e,n){for(var r=n;!t(r);)r=e(r);return r})),Aa=pe((function(t,e){return t in e&&Ee(e[t])?Ce((function(n){return bn(t,n,e)}),e[t]):[e]})),Oa=fe((function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n})),Na=function(t){return{value:t,"fantasy-land/map":function(){return this}}},ja=pe((function(t,e){return t(Na)(e).value})),Sa=be((function(t,e,n){return t(n)?e(n):n})),Ca=pe((function(t,e){for(var n in t)if(Be(n,t)&&!t[n](e[n]))return!1;return!0})),Ta=pe((function(t,e){for(var n in t)if(Be(n,t)&&t[n](e[n]))return!0;return!1})),Ia=pe((function(t,e){return Ca(Ke(ir,t),e)})),$a=pe((function(t,e){return gr(Eo(ar)(t),e)})),Ra=pe((function(t,e){return Boolean(!t^!e)})),Da=pe((function(t,e){for(var n,r=0,o=t.length,i=e.length,u=[];r<o;){for(n=0;n<i;)u[u.length]=[t[r],e[n]],n+=1;r+=1}return u})),Pa=pe((function(t,e){for(var n=[],r=0,o=Math.min(t.length,e.length);r<o;)n[r]=[t[r],e[r]],r+=1;return n})),ka=pe((function(t,e){for(var n=0,r=Math.min(t.length,e.length),o={};n<r;)o[t[n]]=e[n],n+=1;return o})),Ma=be((function(t,e,n){for(var r=[],o=0,i=Math.min(e.length,n.length);o<i;)r[o]=t(e[o],n[o]),o+=1;return r})),Ua=fe((function(t){return ve(t.length,(function(){var e=arguments;return function(){return t.apply(this,e)}}))})),Fa=Object.freeze({__proto__:null,F:function(){return!1},T:function(){return!0},__:ce,add:he,addIndex:me,adjust:we,all:je,allPass:en,always:nn,and:rn,andThen:na,any:un,anyPass:an,ap:sn,aperture:fn,append:pn,apply:hn,applySpec:gn,applyTo:vn,ascend:mn,assoc:_n,assocPath:En,binary:An,bind:De,both:Sn,call:Cn,chain:$n,clamp:Rn,clone:Mn,collectBy:Un,comparator:Fn,complement:Bn,compose:Hn,composeWith:Zn,concat:br,cond:wr,construct:xr,constructN:_r,converge:Ar,count:Or,countBy:Sr,curry:Er,curryN:ve,dec:Cr,defaultTo:Tr,descend:Ir,difference:Dr,differenceWith:Pr,dissoc:Ur,dissocPath:Mr,divide:Fr,drop:Br,dropLast:zr,dropLastWhile:Kr,dropRepeats:to,dropRepeatsWith:Zr,dropWhile:no,either:oo,empty:io,endsWith:ao,eqBy:so,eqProps:co,equals:ir,evolve:lo,filter:yr,find:po,findIndex:yo,findLast:vo,findLastIndex:bo,flatten:wo,flip:Eo,forEach:_o,forEachObjIndexed:xo,fromPairs:Ao,groupBy:Oo,groupWith:No,gt:jo,gte:So,has:To,hasIn:Io,hasPath:Co,head:Kn,identical:$o,identity:Gn,ifElse:Ro,inc:Do,includes:Po,indexBy:ko,indexOf:Mo,init:Uo,innerJoin:Fo,insert:Lo,insertAll:Bo,intersection:Vo,intersperse:zo,into:Qo,invert:Zo,invertObj:ti,invoker:ei,is:ni,isEmpty:ri,isNil:wn,join:oi,juxt:ii,keys:He,keysIn:ui,last:Qr,lastIndexOf:ai,length:ci,lens:li,lensIndex:pi,lensPath:yi,lensProp:gi,lift:jn,liftN:Nn,lt:vi,lte:mi,map:Ke,mapAccum:bi,mapAccumRight:wi,mapObjIndexed:Ei,match:_i,mathMod:xi,max:Se,maxBy:Ai,mean:Ni,median:ji,memoizeWith:Si,mergeAll:Ci,mergeDeepLeft:$i,mergeDeepRight:Ri,mergeDeepWith:Di,mergeDeepWithKey:Ii,mergeLeft:Pi,mergeRight:ki,mergeWith:Mi,mergeWithKey:Ti,min:Ui,minBy:Fi,modify:Bi,modifyPath:Li,modulo:Yi,move:Wi,multiply:qi,nAry:xn,negate:zi,none:Ji,not:Ln,nth:Ge,nthArg:Hi,o:Ki,objOf:Ho,of:Gi,omit:Qi,on:Zi,once:tu,or:ro,otherwise:nu,over:ou,pair:iu,partial:au,partialObject:Vi,partialRight:su,partition:cu,path:di,pathEq:lu,pathOr:fu,pathSatisfies:pu,paths:hi,pick:hu,pickAll:du,pickBy:yu,pipe:zn,pipeWith:Qn,pluck:Ze,prepend:gu,product:vu,project:bu,promap:_u,prop:Qe,propEq:xu,propIs:Au,propOr:Ou,propSatisfies:Nu,props:ju,range:Su,reduce:tn,reduceBy:jr,reduceRight:Cu,reduceWhile:Tu,reduced:Iu,reject:gr,remove:kr,repeat:Ru,replace:Du,reverse:Jn,scan:Pu,sequence:ku,set:Mu,slice:qn,sort:Uu,sortBy:Fu,sortWith:Lu,split:Bu,splitAt:Yu,splitEvery:Wu,splitWhen:qu,splitWhenever:Vu,startsWith:zu,subtract:Ju,sum:Oi,symmetricDifference:Hu,symmetricDifferenceWith:Ku,tail:Vn,take:Wr,takeLast:uo,takeLastWhile:Xu,takeWhile:Qu,tap:ta,test:ea,thunkify:Ua,times:$u,toLower:ra,toPairs:oa,toPairsIn:ia,toString:mr,toUpper:ua,transduce:aa,transpose:sa,traverse:ca,trim:fa,tryCatch:pa,type:Pn,unapply:ha,unary:da,uncurryN:ya,unfold:ga,union:va,unionWith:wa,uniq:qo,uniqBy:Wo,uniqWith:ba,unless:Ea,unnest:_a,until:xa,unwind:Aa,update:fi,useWith:mu,values:dn,valuesIn:Oa,view:ja,when:Sa,where:Ca,whereAny:Ta,whereEq:Ia,without:$a,xor:Ra,xprod:Da,zip:Pa,zipObj:ka,zipWith:Ma}),La="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ba(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ya={exports:{}};Ya.exports=function(){var t="@@type",e=new RegExp("^([\\s\\S]+)/([\\s\\S]+?)(?:@([0-9]+))?$");function n(e){return null!=e&&null!=e.constructor&&e.constructor.prototype!==e&&"string"==typeof e[t]?e[t]:Object.prototype.toString.call(e).slice(8,-1)}return n.parse=function(t){var n=null,r=t,o=0,i=e.exec(t);return null!=i&&(n=i[1],r=i[2],null!=i[3]&&(o=Number(i[3]))),{namespace:n,name:r,version:o}},n}();var Wa=Ba(Ya.exports),qa={alt:"fantasy-land/alt",ap:"fantasy-land/ap",bimap:"fantasy-land/bimap",chain:"fantasy-land/chain",chainRec:"fantasy-land/chainRec",map:"fantasy-land/map",of:"fantasy-land/of",zero:"fantasy-land/zero"},Va=["first","second","third","fourth","fifth"],za="fluture",Ja="Future",Ha=5,Ka=za+"/"+Ja+"@"+Ha;function Xa(t,e){this.head=t,this.tail=e}Xa.prototype.toJSON=function(){return es(this)};var Ga=new Xa(null,null);function Qa(t){return t.tail===t}function Za(t,e){return new Xa(t,e)}function ts(t){for(var e=Ga,n=t;!Qa(n);)e=Za(n.head,e),n=n.tail;return e}function es(t){for(var e=t,n=[];!Qa(e);)n.push(e.head),e=e.tail;return n}Ga.tail=Ga;var ns=Error.captureStackTrace||function(t){var e=new Error;"string"==typeof e.stack?t.stack=t.name+"\n"+e.stack.split("\n").slice(1).join("\n"):t.stack=t.name},rs=os;function os(t){return t}function is(t,e,n,r,o){return e(n,r,o)}function us(t,e,n,r,o){return rs(t,e,n,r,o)}function as(t,e,n){return us(t,ss,t,e,n)}function ss(t,e,n){var r={tag:e,name:" from "+e+":"};return ns(r,n),Za(r,t)}function cs(t,e,n){return ss(t,Va[e-1]+" application of "+n.name,n)}var ls={exports:{}};ls.exports=function(){var t="@@show",e=[];function n(t){return function(e){return o(e)+": "+o(t[e])}}function r(t){return Object.keys(t).sort()}function o(i){if(e.indexOf(i)>=0)return"<Circular>";switch(Object.prototype.toString.call(i)){case"[object Boolean]":return"object"==typeof i?"new Boolean ("+o(i.valueOf())+")":i.toString();case"[object Number]":return"object"==typeof i?"new Number ("+o(i.valueOf())+")":1/i==-1/0?"-0":i.toString(10);case"[object String]":return"object"==typeof i?"new String ("+o(i.valueOf())+")":JSON.stringify(i);case"[object Date]":return"new Date ("+o(isNaN(i.valueOf())?NaN:i.toISOString())+")";case"[object Error]":return"new "+i.name+" ("+o(i.message)+")";case"[object Arguments]":return"function () { return arguments; } ("+Array.prototype.map.call(i,o).join(", ")+")";case"[object Array]":e.push(i);try{return"["+i.map(o).concat(r(i).filter((function(t){return!/^\d+$/.test(t)})).map(n(i))).join(", ")+"]"}finally{e.pop()}case"[object Object]":e.push(i);try{return!(t in i)||null!=i.constructor&&i.constructor.prototype===i?"{"+r(i).map(n(i)).join(", ")+"}":i[t]()}finally{e.pop()}case"[object Set]":e.push(i);try{return"new Set ("+o(Array.from(i.values()))+")"}finally{e.pop()}case"[object Map]":e.push(i);try{return"new Map ("+o(Array.from(i.entries()))+")"}finally{e.pop()}default:return String(i)}}return o}();var fs=Ba(ls.exports),ps=void 0===ps?function(t,e){return setTimeout(t,0,e)}:ps;function hs(){}function ds(t,e){return t(e)}function ys(t){ps((function(){throw t}))}function gs(t){return fs(t)+" :: "+Wa.parse(Wa(t)).name}function vs(t){return new Error(t)}function ms(t){return new TypeError(t)}function bs(t,e,n,r){return ms(t+"() expects its "+Va[e]+" argument to "+n+".\n  Actual: "+gs(r))}function ws(t){return function(e,n,r){return bs(e,n,t,r)}}function Es(t,e,n){var r,o=Wa.parse(Wa(e));return ms(t+" to be a valid Future."+(o.name===Ja?"\n"+(o.namespace!==za?(r=o.namespace,"The Future was not created by "+za+". Make sure you transform other Futures to "+za+" Futures. Got "+(r?"a Future from "+r:"an unscoped Future")+".\n  See: https://github.com/fluture-js/Fluture#casting-futures"):o.version!==Ha?function(t,e){return"The Future was created by "+(e<Ha?"an older":"a newer")+" version of "+za+". This means that one of the sources which creates Futures is outdated. Update this source, or transform its created Futures to be compatible.\n  See: https://github.com/fluture-js/Fluture#casting-futures"}(0,o.version):"Nothing seems wrong. Contact the Fluture maintainers."):"")+"\n  Actual: "+fs(e)+" :: "+o.name+(n||""))}function _s(t,e,n,r){return Es(t+"() expects its "+Va[e]+" argument",n,r)}function xs(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function As(t,e){var n=function(t,e){var n;try{if(t instanceof Error)return t;n="A Non-Error was thrown from a Future: "+fs(t)}catch(t){n="Something was thrown from a Future, but it could not be converted to String"}var r=vs(n);return ns(r,e),r}(t,As),r=function(t,e){for(var n=e,r=ts(t);!Qa(r);)n=Za(r.head,n),r=r.tail;return n}(n.context||Ga,e.context),o=vs(n.message);return xs(o,"future",n.future||e),xs(o,"reason",n.reason||n),xs(o,"stack",o.reason.stack),Os(o,r)}function Os(t,e){return xs(t,"context",e),xs(t,"stack",t.stack+function(t){var e="",n=t;for(;n!==Ga;)e=e+"\n"+n.head.stack,n=n.tail;return e}(e)),t}function Ns(t){return"function"==typeof t}function js(t){return null!==t&&"object"==typeof t}function Ss(t,e){return null!=e&&Ns(e[t])}function Cs(t){return Ss(qa.map,t)}function Ts(t){return Cs(t)&&Ss(qa.ap,t)}function Is(t){return{done:!1,value:t}}function $s(t){return{done:!0,value:t}}function Rs(t){for(var e=new Array(t.arity),n=1;n<=t.arity;n++)e[n-1]=t["$"+String(n)];return e}function Ds(t){return" ("+fs(t)+")"}var Ps={pred:function(){return!0},error:ws("be anything")},ks={pred:Ns,error:ws("be a Function")},Ms={pred:Ys,error:_s},Us={pred:function(t){return t===1/0||"number"==typeof t&&t>0&&t%1==0},error:ws("be a positive Integer")};function Fs(t,e,n,r,o){if(r.length<2&&n.pred(r[0]))return function(t,e,n){return us(t,cs,t,e,n)}(o,t,e);var i=r.length>1?function(t,e){return new TypeError(t.name+"() expects to be called with a single argument per invocation\n  Saw: "+e.length+" arguments"+Array.prototype.slice.call(e).map((function(t,e){return"\n  "+(Va[e]?Va[e].charAt(0).toUpperCase()+Va[e].slice(1):"Argument "+String(e+1))+": "+gs(t)})).join(""))}(e,r):n.error(e.name,t-1,r[0]);throw ns(i,e),Os(i,o)}function Ls(t,e,n){return Fs(1,t,e,n,Ga)}function Bs(t){var e=Ls(Bs,ks,arguments);return new qs(e,t)}function Ys(t){return t instanceof Bs||Wa(t)===Ka}function Ws(t,e,n){var r=function(t,e,n,r){this.context=t,this.$1=e,this.$2=n,this.$3=r};return(r.prototype=Object.create(Bs.prototype)).arity=t,r.prototype.name=e,r.prototype._interpret=n,r}Bs["@@type"]=Ka,Bs.constructor={prototype:Bs},Bs[qa.of]=Qs,Bs[qa.chainRec]=function(t,e){return Qs(Is(e))._transform(new ac(Ga,(function e(n){return n.done?Qs(n.value):t(Is,$s,n.value)._transform(new ac(Ga,e))})))},Bs.prototype["@@type"]=Ka,Bs.prototype["@@show"]=function(){return this.toString()},Bs.prototype.pipe=function(t){if(!Ns(t))throw bs("Future#pipe",0,"be a Function",t);return t(this)},Bs.prototype[qa.ap]=function t(e){var n=as(Ga,"a Fantasy Land dispatch to ap",t);return e._transform(new rc(n,this))},Bs.prototype[qa.map]=function t(e){var n=as(Ga,"a Fantasy Land dispatch to map",t);return this._transform(new ic(n,e))},Bs.prototype[qa.bimap]=function t(e,n){var r=as(Ga,"a Fantasy Land dispatch to bimap",t);return this._transform(new uc(r,e,n))},Bs.prototype[qa.chain]=function t(e){var n=as(Ga,"a Fantasy Land dispatch to chain",t);return this._transform(new ac(n,e))},Bs.prototype[qa.alt]=function t(e){var n=as(Ga,"a Fantasy Land dispatch to alt",t);return this._transform(new oc(n,e))},Bs.prototype.extractLeft=function(){return[]},Bs.prototype.extractRight=function(){return[]},Bs.prototype._transform=function(t){return new Zs(t.context,this,Za(t,Ga))},Bs.prototype.isTransformer=!1,Bs.prototype.context=Ga,Bs.prototype.arity=0,Bs.prototype.name="future",Bs.prototype.toString=function(){return this.name+Rs(this).map(Ds).join("")},Bs.prototype.toJSON=function(){return{$:Ka,kind:"interpreter",type:this.name,args:Rs(this)}};var qs=Ws(1,"Future",(function(t,e,n){var r=this.$1,o=!1,i=hs,u=function(){o=!0};try{i=r((function(t){u=function(){o=!1,e(t)},o&&u()}),(function(t){u=function(){o=!1,n(t)},o&&u()}))}catch(e){return t(As(e,this)),hs}return Ns(i)&&0===i.length?(u(),function(){o&&(o=!1,i&&i())}):(t(As(ms("The computation was expected to return a nullary cancellation function\n  Actual: "+fs(i)),this)),hs)})),Vs=Ws(0,"never",(function(){return hs}));Vs.prototype._isNever=!0;var zs=new Vs(Ga);var Js=Ws(1,"crash",(function(t){return t(this.$1),hs}));function Hs(t){return new Js(Ls(Hs,Ps,arguments),t)}var Ks=Ws(1,"reject",(function(t,e){return e(this.$1),hs}));function Xs(t){return new Ks(Ls(Xs,Ps,arguments),t)}Ks.prototype.extractLeft=function(){return[this.$1]};var Gs=Ws(1,"resolve",(function(t,e,n){return n(this.$1),hs}));function Qs(t){return new Gs(Ls(Qs,Ps,arguments),t)}Gs.prototype.extractRight=function(){return[this.$1]};var Zs=Ws(2,"transform",(function(t,e,n){var r,o,i,u,a=Ga,s=Ga,c=hs,l=!0;function f(){var t=s.head;return s=s.tail,t}function p(){var t=a.head;return a=a.tail,t}function h(t){if(i=!0,(r=t).isTransformer){for(var u=r.$2;!Qa(u);)a=Za(u.head,a),u=u.tail;r=r.$1}l&&function(){l=!1;for(;;){if(i=!1,o=p())c=r._interpret(m,d,y),i||b();else{if(!(o=f()))break;c=r._interpret(m,d,y)}if(!i)return void(l=!0)}c=r._interpret(m,e,n)}()}function d(t){h(o.rejected(t))}function y(t){h(o.resolved(t))}function g(t,e){if(c(),a=Ga,l&&o!==e)for(o.cancel();(u=f())&&u!==e;)u.cancel();h(t)}function v(){for(c(),o&&o.cancel();u=f();)u.cancel()}function m(e){v(),i=!0,a=s=Ga;var n=As(e,r);r=zs,t(n)}function b(){for(a=ts(a);a!==Ga;){if(u=a.head.run(g),i)return;s=Za(u,s),a=a.tail}o=o.run(g)}return h(this),v}));Zs.prototype.isTransformer=!0,Zs.prototype._transform=function(t){return new Zs(t.context,this.$1,Za(t,this.$2))},Zs.prototype.toString=function(){return es(ts(this.$2)).reduce((function(t,e){return e.name+Rs(e).map(Ds).join("")+" ("+t+")"}),this.$1.toString())};var tc={rejected:function(t){return this.cancel(),new Ks(this.context,t)},resolved:function(t){return this.cancel(),new Gs(this.context,t)},run:function(){return this},cancel:hs,context:Ga,arity:0,name:"transform",toJSON:function(){return{$:Ka,kind:"transformation",type:this.name,args:Rs(this)}}};function ec(t){return function(e){var n;try{n=t.call(this,e)}catch(t){return new Js(this.context,t)}return Ys(n)?n:new Js(this.context,Es(this.name+" expects the return value from the function it's given",n,"\n  When called with: "+fs(e)))}}function nc(t,e,n){var r=function(t,e,n){this.context=t,this.$1=e,this.$2=n};return(r.prototype=Object.create(tc)).arity=t,r.prototype.name=e,"function"==typeof n.rejected&&(r.prototype.rejected=ec(n.rejected)),"function"==typeof n.resolved&&(r.prototype.resolved=ec(n.resolved)),"function"==typeof n.run&&(r.prototype.run=n.run),r}var rc=nc(1,"ap",{resolved:function(t){if(Ns(t))return this.$1._transform(new ic(this.context,t));throw ms("ap expects the second Future to resolve to a Function\n  Actual: "+fs(t))}}),oc=nc(1,"alt",{rejected:function(){return this.$1}}),ic=nc(1,"map",{resolved:function(t){return new Gs(this.context,ds(this.$1,t))}}),uc=nc(2,"bimap",{rejected:function(t){return new Ks(this.context,ds(this.$1,t))},resolved:function(t){return new Gs(this.context,ds(this.$2,t))}}),ac=nc(1,"chain",{resolved:function(t){return ds(this.$1,t)}}),sc=Ws(2,"after",(function(t,e,n){var r=setTimeout(n,this.$1,this.$2);return function(){clearTimeout(r)}}));function cc(t){return zs}sc.prototype.extractRight=function(){return[this.$2]};var lc={pred:function(t){return Cs(t)&&Ss(qa.alt,t)},error:ws("have Alt implemented")};var fc=nc(1,"and",{resolved:function(){return this.$1}});var pc={pred:Ts,error:ws("have Apply implemented")};var hc=Ws(2,"encaseP",(function(t,e,n){var r,o,i=!0,u=this.$1,a=this.$2;try{r=u(a)}catch(e){return t(As(e,this)),hs}return(o=r)instanceof Promise||null!=o&&Ns(o.then)?(r.then((function(t){i&&(i=!1,n(t))}),(function(t){i&&(i=!1,e(t))})),function(){i=!1}):(t(As(function(t,e,n){return ms("encaseP() expects the function it's given to return a Promise/Thenable\n  Actual: "+fs(t)+"\n  From calling: "+fs(e)+"\n  With: "+fs(n))}(r,u,a),this)),hs)}));function dc(t){var e=Ls(dc,ks,arguments);return function n(r){var o=Fs(2,n,Ps,arguments,e);return new hc(o,t,r)}}var yc=Ws(2,"encase",(function(t,e,n){var r,o=this.$1;try{r=o(this.$2)}catch(t){return e(t),hs}return n(r),hs}));function gc(t){var e=Ls(gc,ks,arguments);return function n(r){var o=Fs(2,n,Ps,arguments,e);return new yc(o,t,r)}}var vc={pred:function(t){return Cs(t)&&Ss(qa.bimap,t)},error:ws("have Bifunctor implemented")};var mc=nc(2,"bichain",{rejected:function(t){return ds(this.$1,t)},resolved:function(t){return ds(this.$2,t)}});function bc(t){var e=this;e.rec=hs,e.rej=hs,e.res=hs,e.crashed=!1,e.rejected=!1,e.resolved=!1,e.value=null,e.cancel=t._interpret((function(t){e.value=t,e.crashed=!0,e.cancel=hs,e.rec(t)}),(function(t){e.value=t,e.rejected=!0,e.cancel=hs,e.rej(t)}),(function(t){e.value=t,e.resolved=!0,e.cancel=hs,e.res(t)}))}function wc(t,e){t(Hs(e))}function Ec(t,e){t(Xs(e))}function _c(t,e,n,r,o){var i=nc(1,t,Object.assign({run:function(t){var o=new bc(this.$1),u=new i(this.context,o);function a(e){t(e,u)}return u.cancel=o._interpret((function(t){e(a,t)}),(function(t){n(a,t)}),(function(t){r(a,t)})),u}},o));return i}bc.prototype=Object.create(Bs.prototype),bc.prototype._interpret=function(t,e,n){return this.crashed?t(this.value):this.rejected?e(this.value):this.resolved?n(this.value):(this.rec=t,this.rej=e,this.res=n),this.cancel};var xc=nc(1,"pair",{resolved:function(t){return new Gs(this.context,[t,this.$1])}}),Ac=_c("both",wc,Ec,hs,{resolved:function(t){return this.$1._transform(new xc(this.context,t))}});function Oc(t,e,n){this[2]=t,this[3]=e,this[4]=n}var Nc=Ws(1,"cache",(function(t,e,n){var r=hs;switch(this._state){case 1:r=this._addToQueue(t,e,n);break;case 2:t(this._value);break;case 3:e(this._value);break;case 4:n(this._value);break;default:this._queue=[],r=this._addToQueue(t,e,n),this.run()}return r}));Nc.prototype._cancel=hs,Nc.prototype._queue=null,Nc.prototype._queued=0,Nc.prototype._value=void 0,Nc.prototype._state=0,Nc.prototype.extractLeft=function(){return 3===this._state?[this._value]:[]},Nc.prototype.extractRight=function(){return 4===this._state?[this._value]:[]},Nc.prototype._addToQueue=function(t,e,n){var r=this;if(r._state>1)return hs;var o=r._queue.push(new Oc(t,e,n))-1;return r._queued=r._queued+1,function(){r._state>1||(r._queue[o]=void 0,r._queued=r._queued-1,0===r._queued&&r.reset())}},Nc.prototype._drainQueue=function(){if(!(this._state<=1)&&0!==this._queued){for(var t=this._queue,e=t.length,n=this._state,r=this._value,o=0;o<e;o++)t[o]&&t[o][n](r),t[o]=void 0;this._queue=void 0,this._queued=0}},Nc.prototype.crash=function(t){this._state>1||(this._value=t,this._state=2,this._drainQueue())},Nc.prototype.reject=function(t){this._state>1||(this._value=t,this._state=3,this._drainQueue())},Nc.prototype.resolve=function(t){this._state>1||(this._value=t,this._state=4,this._drainQueue())},Nc.prototype.run=function(){var t=this;t._state>0||(t._state=1,t._cancel=t.$1._interpret((function(e){t.crash(e)}),(function(e){t.reject(e)}),(function(e){t.resolve(e)})))},Nc.prototype.reset=function(){0!==this._state&&(1===this._state&&this._cancel(),this._cancel=hs,this._queue=[],this._queued=0,this._value=void 0,this._state=0)};var jc=nc(1,"chainRej",{rejected:function(t){return ds(this.$1,t)}});var Sc={pred:function(t){return Ts(t)&&Ss(qa.chain,t)},error:ws("have Chain implemented")};var Cc=nc(2,"coalesce",{rejected:function(t){return new Gs(this.context,ds(this.$1,t))},resolved:function(t){return new Gs(this.context,ds(this.$2,t))}});function Tc(t){return ms("The iterator did not return a valid iteration from iterator.next()\n  Actual: "+fs(t))}function Ic(t){return Es("go() expects the value produced by the iterator",t,"\n  Tip: If you're using a generator, make sure you always yield a Future")}var $c=Ws(1,"go",(function(t,e,n){var r,o,i,u=this,a=0,s=hs;function c(e){t(As(e,u))}try{i=u.$1()}catch(t){return c(t),hs}if(!function(t){return js(t)&&Ns(t.next)}(i))return c(bs("go",0,'return an iterator, maybe you forgot the "*"',i)),hs;function l(t){if(o=t,2===a)return f();a=1}function f(){for(;;){try{r=i.next(o)}catch(t){return c(t)}if(!js(t=r)||"boolean"!=typeof t.done)return c(Tc(r));if(r.done)break;if(!Ys(r.value))return c(Ic(r.value));if(a=0,s=r.value._interpret(c,e,l),0===a)return a=2}var t;n(r.value)}return f(),function(){s()}}));var Rc=Ws(3,"hook",(function(t,e,n){var r,o,i,u=this,a=this.$1,s=this.$2,c=this.$3,l=hs,f=hs;function p(){f(i)}function h(e){t(As(e,u))}function d(){var t,e;try{t=s(o)}catch(t){return h(t)}if(!Ys(t))return h((e=o,Es("hook() expects the return value from the first function it's given",t,"\n  From calling: "+fs(s)+"\n  With: "+fs(e))));r=g,t._interpret(h,v,p)}function y(){l(),d(),g()}function g(){f=hs}function v(t){h(new Error("The disposal Future rejected with "+fs(t)))}function m(t){f=h,i=t,d()}function b(t){f=e,i=t,d()}function w(t){f=n,i=t,d()}var E=a._interpret(h,e,(function(t){var e;o=t;try{e=c(o)}catch(t){return m(t)}if(!Ys(e))return m(function(t,e,n){return Es("hook() expects the return value from the second function it's given",t,"\n  From calling: "+fs(e)+"\n  With: "+fs(n))}(e,c,o));r=y,l=e._interpret(m,b,w)}));return r=r||E,function(){t=ys,r()}}));var Dc=nc(1,"lastly",{rejected:function(t){return this.$1._transform(new fc(this.context,new Ks(this.context,t)))},resolved:function(t){return this.$1._transform(new fc(this.context,new Gs(this.context,t)))}});var Pc=nc(1,"mapRej",{rejected:function(t){return new Ks(this.context,ds(this.$1,t))}});var kc={pred:Cs,error:ws("have Functor implemented")};var Mc=Ws(1,"node",(function(t,e,n){var r=!1,o=function(){r=!0};try{ds(this.$1,(function(t,i){o=t?function(){r=!1,e(t)}:function(){r=!1,n(i)},r&&o()}))}catch(e){return t(As(e,this)),r=!1,hs}return o(),function(){r=!1}}));var Uc=_c("pap",wc,Ec,hs,{resolved:function(t){if(Ns(t))return this.$1._transform(new ic(this.context,t));throw ms("pap expects the second Future to resolve to a Function\n  Actual: "+fs(t))}});var Fc={pred:function(t){if(e=t,!Array.isArray(e))return!1;for(var e,n=0;n<t.length;n++)if(!Ys(t[n]))return!1;return!0},error:ws("be an Array of valid Futures")},Lc=Ws(2,"parallel",(function(t,e,n){var r=this,o=this.$2,i=o.length,u=Math.min(this.$1,i),a=new Array(i),s=new Array(i),c=0,l=0,f=!1,p=hs;function h(){t=hs,e=hs,n=hs,c=i;for(var r=0;r<i;r++)a[r]&&a[r]()}function d(u){l++,a[u]=o[u]._interpret((function(e){p=t,a[u]=hs,h(),p(As(e,r))}),(function(t){p=e,a[u]=hs,h(),p(t)}),(function(t){a[u]=hs,s[u]=t,l--,c===i&&0===l?n(s):f&&y()}))}function y(){for(f=!1;c<i&&l<u;)d(c++);f=!0}return y(),h})),Bc=Qs([]);function Yc(t){var e=Ls(Yc,Us,arguments);return function n(r){var o=Fs(2,n,Fc,arguments,e);return 0===r.length?Bc:new Lc(o,t,r)}}var Wc=_c("race",wc,Ec,(function(t,e){t(Qs(e))}),{});function qc(t){this.sequential=t}function Vc(t){if(!Ys(t))throw _s(Vc.name,0,t);return new qc(t)}qc.prototype=Object.create(Vc.prototype);var zc=za+"/ConcurrentFuture@"+Ha,Jc=new qc(zs);Vc["@@type"]=zc,Vc.constructor={prototype:Vc},Vc[qa.of]=function(t){return new qc(Qs(t))},Vc[qa.zero]=function(){return Jc},Vc.prototype["@@type"]=zc,Vc.prototype["@@show"]=function(){return this.toString()},Vc.prototype.toString=function(){return"Par ("+this.sequential.toString()+")"},Vc.prototype[qa.map]=function t(e){var n=as(Ga,"a Fantasy Land dispatch to map via ConcurrentFuture",t);return new qc(this.sequential._transform(new ic(n,e)))},Vc.prototype[qa.ap]=function t(e){var n=as(Ga,"a Fantasy Land dispatch to ap via ConcurrentFuture",t);return new qc(e.sequential._transform(new Uc(n,this.sequential)))},Vc.prototype[qa.alt]=function t(e){var n=as(Ga,"a Fantasy Land dispatch to alt via ConcurrentFuture",t);return new qc(e.sequential._transform(new Wc(n,this.sequential)))};var Hc=Ws(2,"rejectAfter",(function(t,e){var n=setTimeout(e,this.$1,this.$2);return function(){clearTimeout(n)}}));function Kc(t){return zs}Hc.prototype.extractLeft=function(){return[this.$2]};var Xc={pred:function(t){return t instanceof qc||Wa(t)===zc},error:ws("be a ConcurrentFuture")};var Gc=nc(0,"swap",{resolved:function(t){return new Ks(this.context,t)},rejected:function(t){return new Gs(this.context,t)}});var Qc=Object.freeze({__proto__:null,Future:Bs,Par:Vc,after:function t(e){var n=Ls(t,Us,arguments);return e===1/0?cc:function t(r){var o=Fs(2,t,Ps,arguments,n);return new sc(o,e,r)}},alt:function t(e){if(Ys(e)){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new oc(o,e))}}var r=Ls(t,lc,arguments);return function t(n){return Fs(2,t,lc,arguments,r),e[qa.alt](n)}},and:function t(e){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new fc(o,e))}},ap:function t(e){if(Ys(e)){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new rc(o,e))}}var r=Ls(t,pc,arguments);return function t(n){return Fs(2,t,pc,arguments,r),e[qa.ap](n)}},attempt:function(t){return gc.apply(this,arguments)(void 0)},attemptP:function(t){return dc.apply(this,arguments)(void 0)},bichain:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,ks,arguments,n);return function t(n){var i=Fs(3,t,Ms,arguments,o);return n._transform(new mc(i,e,r))}}},bimap:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,ks,arguments,n);return function t(n){var i=Fs(3,t,vc,arguments,o);return Ys(n)?n._transform(new uc(i,e,r)):n[qa.bimap](e,r)}}},both:function t(e){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new Ac(o,e))}},cache:function t(e){return new Nc(Ls(t,Ms,arguments),e)},chain:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,Sc,arguments,n);return Ys(r)?r._transform(new ac(o,e)):r[qa.chain](e)}},chainRej:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new jc(o,e))}},coalesce:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,ks,arguments,n);return function t(n){var i=Fs(3,t,Ms,arguments,o);return n._transform(new Cc(i,e,r))}}},debugMode:function(t){rs=t?is:os},default:Bs,done:function t(e){var n=Ls(t,ks,arguments);function r(t){e(null,t)}return function t(o){return Fs(2,t,Ms,arguments,n),o._interpret(ys,e,r)}},encase:gc,encaseP:dc,extractLeft:function t(e){return Ls(t,Ms,arguments),e.extractLeft()},extractRight:function t(e){return Ls(t,Ms,arguments),e.extractRight()},fork:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,ks,arguments,n);return function t(n){return Fs(3,t,Ms,arguments,o),n._interpret(ys,e,r)}}},forkCatch:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,ks,arguments,n);return function t(n){var i=Fs(3,t,ks,arguments,o);return function t(o){return Fs(4,t,Ms,arguments,i),o._interpret(e,r,n)}}}},go:function t(e){return new $c(Ls(t,ks,arguments),e)},hook:function t(e){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,ks,arguments,n);return function t(n){var i=Fs(3,t,ks,arguments,o);return new Rc(i,e,r,n)}}},isFuture:Ys,isNever:function(t){return Ys(t)&&!0===t._isNever},lastly:function t(e){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new Dc(o,e))}},map:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,kc,arguments,n);return Ys(r)?r._transform(new ic(o,e)):r[qa.map](e)}},mapRej:function t(e){var n=Ls(t,ks,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new Pc(o,e))}},never:zs,node:function t(e){return new Mc(Ls(t,ks,arguments),e)},pap:function t(e){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new Uc(o,e))}},parallel:Yc,promise:function t(e){return Ls(t,Ms,arguments),new Promise((function(t,n){e._interpret(n,n,t)}))},race:function t(e){var n=Ls(t,Ms,arguments);return function t(r){var o=Fs(2,t,Ms,arguments,n);return r._transform(new Wc(o,e))}},reject:Xs,rejectAfter:function t(e){var n=Ls(t,Us,arguments);return e===1/0?Kc:function t(r){var o=Fs(2,t,Ps,arguments,n);return new Hc(o,e,r)}},resolve:Qs,seq:function t(e){return Ls(t,Xc,arguments),e.sequential},swap:function t(e){var n=Ls(t,Ms,arguments);return e._transform(new Gc(n))},value:function t(e){var n=Ls(t,ks,arguments);return function t(r){return Fs(2,t,Ms,arguments,n),r._interpret(ys,(function(t){ys(vs("Future#value was called on a rejected Future\n  Rejection: "+fs(t)+"\n  Future: "+fs(r)))}),e)}}});const Zc={},tl=ve(2,((t,e)=>n=>{const r=Object.entries(e),o=n.reduce(((e,n,o)=>{const i=t(n);return r.forEach((([t,r])=>{e[i]=e[i]??{},e[i][t]=r(e[i]?.[t],n?.[t],e[i],n)})),e[i]={...n,...e[i]},e}),{});return Object.values(o)}));Zc.groupByWithCalc=tl;const el=ve(4,((t,e=((t,e,n)=>n),n,r)=>{const o=ya(2,t);return $n((t=>{const r=zn(yr(o(ce,t)),Ke(Ti(e,ce,t)))(n);return 0===r.length?t:r}))(r)}));Zc.innerRightJoinWith=el;const nl=ve(5,(function(t,e,n,r,o){const i=new Map;for(let t of o)i.set(r(t),t);for(let t of n)void 0===i.get(e(t))&&i.set(e(t),t);return!0===t||!1===t?Array.from(i.entries()).sort(Dt("0",t)).map((t=>t[1])):Array.from(i.values())}));function rl(t,e){return t!==e&&(void 0===e||t<e)}function ol(t,e){return t!==e&&(void 0===t||t>e)}function il(t,e){try{return e(t)}catch(t){return}}Zc.unionWithHashKeys=nl;const ul=ve(5,(function(t,e,n,r,o){const i=new Map;let u=il(n[0],e),a=il(o[0],r);for(let t=0,s=0;t<n.length||s<o.length;)rl(a,u)?(void 0===i.get(a)&&i.set(a,o[s]),s++,a=il(o[s],r)):ol(a,u)?(i.set(u,n[t]),t++,u=il(n[t],e)):(i.set(u,n[t]),t++,s++,u=il(n[t],e),a=il(o[s],r));return!0===t||!1===t?Array.from(i.entries()).sort(Dt("0",t)).map((t=>t[1])):Array.from(i.values())}));Zc.updateWithHashKeys=ul;const al=Er(((t,e)=>Sn(So(ce,t),vi(ce,e))));Zc.between=al;const sl=ve(2,((t,e)=>!1===wn(t)&&!1===wn(e)&&(t.id||t.Id||t.ID)===(e.id||e.Id||e.ID)&&void 0!==(t.id||t.Id||t.ID)));Zc.matchByPropId=sl;const cl=ve(2,(function(t,e){return tn(((e,n)=>t(n)?fi(1,pn(n,e[1]),e):fi(0,pn(n,e[0]),e)),[[],[]])}));Zc.splitCond=cl;const ll=Er(((t,e,n)=>n.reduce(((n,r,o,i)=>(t(r,o,i)&&n.push(e(r,o,i)),n)),[])));Zc.filterMap=ll;const fl=Er(((t,e,n)=>n.map(((r,o)=>{let i;return i=o===n.length-1?e:n[o+1],t(r,i)}))));Zc.mapWithNext=fl;const pl=Er(((t,e,n)=>n.map(((r,o)=>{let i;return i=0===o?e:n[o-1],t(i,r)}))));Zc.mapWithPrevious=pl;const hl=Er(((t,e,n,r)=>r.filter((r=>{let o=r;return null!=n&&"function"!=typeof n&&(o=r[n]),null!=n&&"function"==typeof n&&(o=n(r)),!e.find((e=>{let n=e;return null!=t&&"function"!=typeof t&&(n=e[t]),null!=t&&"function"==typeof t&&(n=t(e)),o===n}))}))));Zc.exclude=hl;const dl=zn(xu("0","unfold"),Ln),yl=zn(Qe("1"),Pn,ir("Function"));function gl(t){return(...e)=>zn(Object.entries,Zc.filterMap(Sn(dl,yl),$n(pn,zn(Qe("1"),pa(zn((t=>{const n=bl(!0)(t),r=n(...Mn(e));return"function"==typeof r[0]&&e.length>1?n(Mn(...Uo(e)))(Mn(Qr(e))):r})),((t,n)=>{try{return[n(Mn(...Uo(e)))(Mn(Qr(e))),"(all,arguments,but)(last)"]}catch(t){return["error"]}}))))))(t)}function vl(t,e){return pa(zn(yr((e=>ir(e[2][0],t))),Ke(gn({fun:Qe("0"),sign:di(["2","1"])}))),(()=>[]))(e)}function ml(t,e){return(...n)=>{let r=t,o=0;if(0===e)return r(...n);const i=(...t)=>o>=e?r(...n)(...t):(r=r(...t),o+=t.length,o>=e?r(...n):i);return i}}function bl(t=!1){return function e(n){let r=0,o=n,i="";return function(...n){let u,a;for(;r<n.length&&"function"==typeof o;)u=0===o.length?n.length:r+o.length,a=n.slice(r,u),r=u,"function"==typeof o&&(i=`${i}(${a.map((t=>typeof t)).join(",")})`,o=o(...a));return"function"==typeof o?t?[e(o),i]:e(o):t?[o,i]:o}}}function wl(t,e){return t.constructor(((t,n)=>(t(e),()=>{})))}function El(t,e){return e instanceof Error&&"Future"===t?.constructor?.name}Zc.partialAtPos=ml;const _l=function(...t){return function(...e){return t.reduce(((t,e,n)=>{let r,o=e;if(0===n&&t.length>1){const n=t.filter((t=>"Future"===t?.constructor?.name)).length;n>1?t[t.length-1]=Xs(new Error("Only one Future allowed...")):1===n&&"Future"!==Qr(t)?.constructor?.name?t[t.length-1]=Xs(new Error("Future param must be the last param of the function")):o=e?.bind(void 0,...t.slice(0,t.length-1))}return 0===n&&(t=t[t.length-1]),t instanceof Error?t:("function"==typeof t?.chain?r=t.chain:"function"==typeof t?.["fantasy-land/chain"]?r=t["fantasy-land/chain"].bind(t):"function"==typeof t?.flatMap&&(r=t.flatMap.bind(t)),r?r((e=>{if(El(t,e))return wl(t,e);let n;if("Future"===t?.constructor?.name)try{n=o(e)}catch(t){n=t}else n=o(e);return El(t,n)?wl(t,n):n?.constructor?.name===t?.constructor?.name?n:"function"==typeof t?.constructor?.of?t.constructor.of(n):"function"==typeof t?.constructor?.["fantasy-land/of"]?t.constructor["fantasy-land/of"](n):n})):o(t))}),e)}};Zc.pipeWithChain=_l;const xl=function(...t){return function(...e){return t.reduce(((t,e,n)=>{let r,o=e;if(0===n&&t.length>1){const n=t.filter((t=>"Future"===t?.constructor?.name)).length;n>1?t[t.length-1]=Xs(new Error("Only one Future allowed...")):1===n&&"Future"!==Qr(t)?.constructor?.name?t[t.length-1]=Xs(new Error("Future param must be the last param of the function")):o=e?.bind(void 0,...t.slice(0,t.length-1))}return 0===n&&(t=t[t.length-1]),t instanceof Error?t:("function"==typeof t?.chain?r=t.chain:"function"==typeof t?.["fantasy-land/chain"]?r=t["fantasy-land/chain"].bind(t):Bt(t)&&(r=t.then.bind(t)),r?r((e=>{if(El(t,e))return wl(t,e);let n;if("Future"===t?.constructor?.name||Bt(t))try{n=o(e)}catch(t){n=t}else n=o(e);return El(t,n)?wl(t,n):function(t,e){return e instanceof Error&&Bt(t)}(t,n)?t.then((()=>Promise.reject(n))):n?.constructor?.name===t?.constructor?.name?n:"function"==typeof t?.constructor?.of?t.constructor.of(n):"function"==typeof t?.constructor?.["fantasy-land/of"]?t.constructor["fantasy-land/of"](n):n})):o(t))}),e)}};Zc.pipe=xl;const Al=(t,e)=>(...n)=>(...r)=>{if("function"!=typeof t||n.some((t=>"function"!=typeof t))||void 0!==e&&"function"!=typeof e){const r=`funCond: ${typeof t} ${void 0===e?"":"ini: "+typeof e} funcs: ${n.map((t=>typeof t))}`;throw new Error(`pipeWhile was called without funcfion/s in funCond or pipe functions ${r}`)}"function"==typeof e&&e(...r);let o=r;for(;t(...o);)o=n.reduce(((t,e)=>[e(...t)]),o);return Qr(o)};function Ol(t=1/0){return e=>Yc(t)(e.map((t=>Ys(t)?t:Qs(t))))}Zc.pipeWhile=Al,Zc.parallel=Ol;const Nl=(t=1/0)=>e=>n=>Zc.parallel(t)(e.map((t=>t(n))));Zc.runFutureFunctionsInParallel=Nl;const jl=(t=1/0)=>e=>n=>{if(!(t>0))throw new P("NUMBEROFFUNCTIONSTORUNINPARALLEL_MUST_BE_BETWEEN_0_TO_INFINITY");let r=0,o=0,i="sync",u="sync",a=[];return function s(){if(o>=e.length)return function(){if("future"===i)return Zc.parallel(t)(a);if("promise"===i)return Promise.all(a);return a}();return"promise"===u&&r>=t?(r--,Qr(a).then(s)):(a[o]=e[o](n),function(t){u=Ys(t)?"future":Bt(t)?"promise":"sync","sync"===i&&(i=u);if("sync"!==u&&i!==u)throw new P("MIX_PROMISE_AND_FUTURE",`Promises and future cannot be mixed ${i} ${u}`)}(a[o]),"promise"===u&&r++,o++,s())}()};Zc.runFunctionsSyncOrParallel=jl;const Sl=ve(2,(function t(e,n){return!1===Array.isArray(e)?t([e],n):e.reduce(((t,e)=>{let r=e;"string"==typeof e&&(r={path:e});let{path:o,name:i,apply:u}=r,a=o.split(".");void 0===i&&(i=Qr(a));let s=di(a,n);return t[i]="function"==typeof u?u(s):s,t}),{})}));Zc.pickPaths=Sl;const Cl=ve(3,(function(t,e,n){const r=t.length-n.length;return n.map(((n,o)=>({...n,...Sl(e,t[o+r])})))}));function Tl(t){return(...e)=>{if("function"==typeof t){const n=o(e);console.log(t(...n))}else console.log(t,...e);return Qr(e)}}function Il(t,e){let n=parseInt(e,10);if("string"!=typeof t||isNaN(n))return t;const r=t.trim();if(r.length>=n)return r;const o=Math.floor((n-r.length)/2),i=n-r.length-o;return"".padEnd(o)+r+"".padEnd(i)}function $l(t,e){let n=parseInt(e,10);if("string"!=typeof t||isNaN(n))return t;const r=t.trim();return r.length>=n?r:r.padEnd(n)}function Rl({HEADING_IDENTATION:t,ROW_IDENTATION:e}={HEADING_IDENTATION:Il,ROW_IDENTATION:$l}){let n,r,o,i;return{loadParams:u=>a=>(r=u,o=a,{id:r,load:t=>{i=t,n=i.reduce(((t,e)=>{let n=(""+(e??"")).length;return t<n?n:t}),o.length)},getSize:()=>n,heading:{nextValue:function*(){yield t(o,n)}},row:{nextValue:function*(){for(let t of i)yield e(""+(t??""),n)}}})}}Zc.mergeArrayOfObjectsRenamingProps=Cl,Zc.RLog=Tl,Zc.findSolution=vl,Zc.something=gl,Zc.uncurry=bl;const Dl=Symbol();function Pl(t){let e;Array.isArray(t)&&(e=t.map(((t,e)=>"object"==typeof t?{[Dl]:e,...t}:{[Dl]:e}))),"object"==typeof t&&!1===Array.isArray(t)&&(e=Object.entries(t).map((([t,e])=>"object"==typeof e?{[Dl]:t,...e}:{[Dl]:t})));const n="│",r="┌",o="┐",i="┬",u="└",a="┘",s="┴",c="─",l="┼",f="├",p="┤",h=" ",d=" ",y="",g=[];function v(t){let e,r=[],o=!0,i={};do{e=!0;const u=g.reduce(((r,u,a)=>{o&&(i[a]=u[t].nextValue());const{value:s,done:c}=i[a].next();return!0!==c&&(e=!1),r+h+s+d+n}),y+n);!1===e&&r.push(u),o=!1}while(!1===e);return r}function m(){if(g.forEach((t=>t.load(e.map((e=>e[t.id]))))),0===g.length)return"[]";const t=[g.reduce(((t,e,n)=>t+c+"".padEnd(e.getSize(),c)+c+(n<g.length-1?i:o)),y+r),...v("heading"),g.reduce(((t,e,n)=>t+c+"".padEnd(e.getSize(),c)+c+(n<g.length-1?l:p)),y+f),...v("row"),g.reduce(((t,e,n)=>t+c+"".padEnd(e.getSize(),c)+c+(n<g.length-1?s:a)),y+u)];return t.join("\n")}function b({type:t,id:e,title:n}){let r=t.loadParams(e)(n??e);return g.push(r),{addColumn:b,draw:m}}return{addColumn:b,auto:function(){return e.map((t=>{Object.keys(t).map((t=>{void 0===g.find((e=>e.id===t))&&b({type:Rl(),id:t})}))})),{draw:m}},draw:m}}function kl(t){console.log(Pl(t).auto().draw())}function Ml(t){let e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:void 0!==this?this:{};console.table?"bun"===e?.process?.argv0?console.log(Pl(t).auto().draw()):console.table(t):console.log(t)}const Ul=80,Fl="|",Ll="|",Bl="-",Yl=2,Wl=[{limit:9e3,label:"ms",valueInUnits:t=>e=>e-t},{limit:54e4,label:"sec",valueInUnits:t=>e=>Math.floor((e-t)/1e3).toString()},{limit:1296e4,label:"min",valueInUnits:t=>e=>Math.floor((e-t)/6e4).toString()},{limit:47304e5,label:"hr",valueInUnits:t=>e=>Math.floor((e-t)/36e5).toString()},{limit:47304e7,label:"day",valueInUnits:t=>e=>Math.floor((e-t)/864e5).toString()},{limit:47304e8,label:"year",valueInUnits:t=>e=>Math.floor((e-t)/31536e6).toString()},{limit:1/0,label:"cen",valueInUnits:t=>e=>Math.floor((e-t)/31536e8).toString()}];function ql(t,e,n){return function(t,e,n){return t.substring(0,n)+e+t.substring(n+e.length)}(t,Fl+"".padEnd(n-e-1,Bl)+Ll,e)}function Vl(){let t,e,n,r,o,i;function u(t){return Math.floor((t-r[0])/o)}return{loadParams:a=>s=>(e=a,{id:e,load:e=>{n=e.map((t=>t.map((t=>({start:new Date(t.start).valueOf(),end:new Date(t.end).valueOf()}))))),r=[...new Set(n.flatMap((t=>t)).reduce(((t,e)=>[...t,e.start,e.end]),[]).sort(Lt()))],o=(r[r.length-1]-r[0])/Ul;let u=Wl.findIndex((t=>r[r.length-1]-r[0]<t.limit));i=Wl[u],t=i.label.length+1+Ul+Yl},getSize:()=>t,heading:{nextValue:function*(){yield r.reduce(((t,e)=>function(t,e,n,r){let o=""+e,i=Math.floor((o.length-1)/2),u=o.length-1-i;return t.length<n+i+r||t.substring(n-u-r,n+i+r).split("").some((t=>" "!==t))?t:t.substring(0,n-u)+o+t.substring(n+i+1)}(t,i.valueInUnits(r[0])(e),u(e)+3,1)),i.label+" "+"".padEnd(Ul+Yl))}},row:{nextValue:function*(){for(let e of n)yield e.reduce(((t,e)=>ql(t,u(e.start)+i.label.length+1,u(e.end)+i.label.length+1)),"".padEnd(t))}}})}}function zl(){let t;e?.now&&(t=()=>e.now()),void 0===t&&(t=()=>Date.now());let n={},r={};i("chronoCreation");let o=function(...t){let e,n,r;return t.length>=2?o(...t):(({type:e,displayFormat:n,referenceMiliseconds:r}=t[0]),o);function o(t,i,u){if(t>i)throw new Error("range(start, end) start cannot be > than end");function a(){if("miliseconds"===e&&"ms"===n&&void 0!==r){const e=Jl({start:r,end:t}),n=Jl({start:r,end:i});return`${"interval: "+u} { start:${e} <-${n-e}-> end:${n} }`}return`{ start:${t}, end:${i} }`}function s(e){let n=t>e.start?t:e.start,r=i<e.end?i:e.end;return void 0===n||void 0===r||n>r?o(void 0,void 0):o(n,r)}return{[Symbol.for("nodejs.util.inspect.custom")]:a,toString:a,intersect:s,start:t,end:i,interval:u}}}({type:"miliseconds",displayFormat:"ms",referenceMiliseconds:r.chronoCreation.miliseconds});function i(e){r[e]={date:new Date,miliseconds:t()}}function u(t){if("string"!=typeof t||!1===isNaN(Number(t)))throw new P("EVENT_NAME_MUST_HAVE_ALPHABETICS_CHARS",`Event name '${t}' must be of type string and contain some non numeric character`,t)}function a(e){let r=t();("string"==typeof e?[e]:e).forEach((t=>{u(t),n[t]??={},n[t].start??=[],n[t].start.push(r)}))}function s(e){let r=t();("string"==typeof e?[e]:e).forEach((t=>{if(void 0===n[t])throw new P("EVENT_NAME_NOT_FOUND",`No such Label '${t}' for .timeEnd(...)`,t);let e=n[t].start.pop();if(void 0===e)throw new P("EVENT_NAME_ALREADY_CONSUMED",`eventName: '${t}' was already consumed by a previous call to .timeEnd(...)`,t);n[t].ranges??=[],n[t].ranges.push(o(e,r))}))}function c(t){return Object.entries(t).reduce(((t,[e,n])=>(n.ranges.forEach((e=>{t[0]>e.start&&(t[0]=e.start),t[1]<e.end&&(t[1]=e.end)})),t)),[1/0,0]),t}function l(t){let e=0;const n=t.reduce(((t,n)=>{let r=t.find((t=>t.name===n.name));const o=n.range.end-n.range.start;return e+=o,r?r.elapse=r.elapse+o:t.push({name:n.name,elapse:o}),t}),[]).map((t=>(t.percentage=Number(Number(100*t.elapse/e).toFixed(2)),t.elapse=Math.floor(t.elapse),t)));return console.log(""),console.log("Total elapse Time of each event: "),kl(n),t}function f(t){return zn(tl((t=>JSON.stringify(t.runningEvents.sort(Lt()))),{percentage:(t,e)=>(t??0)+e,elapseMs:(t,e)=>(t??0)+e}),Ke((t=>({...t,elapseMs:Math.floor(t.elapseMs),percentage:Number(t.percentage.toFixed(2))}))),(t=>{console.log(""),console.log("Coinciding Events timeline: "),kl(t)}))(t),t}function p(t){const e=Pl(t);return e.addColumn({type:Rl(),id:"event",title:"Events"}),e.addColumn({type:Vl(),id:"ranges"}),e}function h(t){let e=Object.entries(t).map((([t,e])=>({event:t,ranges:e.ranges.map((({start:t,end:e})=>({start:Math.floor(t),end:Math.floor(e)})))})));const n=p(e);var r;return r=n,console.log(""),console.log("Timeline of events:"),console.log(r.draw()),t}function d(){i("report"),console.log(""),Object.entries(r).forEach((([t,e])=>console.log(t,": ",e.date))),zn(h,c,y,l,g,Uu(Dt("range.start")),v,f)(n)}function y(t){return Object.entries(t).reduce(((t,[e,n])=>(t.push(...n.ranges?.map((t=>({name:e,range:t})))??[]),t)),[])}function g(t){return t.reduce(((t,{name:e,range:n})=>(t.push({name:e,isLeft:!0,edge:n.start,edgeEnd:n.end}),t.push({name:e,isLeft:!1,edge:n.end}),t)),[]).sort(Dt("edge")).reduce(((t,{name:e,isLeft:n,edge:r,edgeEnd:i},u,a)=>{if(n){let n=u;do{Ht({runningEvents:[e],range:o(a[n].edge,a[n+1].edge)},t,["range"],((t,n)=>(Jt(e,n.runningEvents),n))),n++}while(a[n].name!==e||!1!==a[n].isLeft||a[n].edge!==i)}return t}),[]).filter((t=>t.range.start!==t.range.end))}function v(t){let e=0;return t.map((({runningEvents:t,range:n})=>{let r=Jl(n);return e+=r,{runningEvents:t,elapseMs:r}})).map((t=>(t.percentage=100*t.elapseMs/e,t)))}return{time:a,timeEnd:s,report:d,setTime:t=>e=>(a(t),e),setTimeEnd:t=>e=>(s(t),e),logReport:t=>(d(),t),timelineLines:function(){let t=Object.entries(n).map((([t,e])=>({event:t,ranges:e.ranges.map((({start:t,end:e})=>({start:Math.floor(t),end:Math.floor(e)})))})));return p(t).draw()},getChronoState:()=>n,setChronoStateUsingPerformanceAPIFormat:t=>{n=t.reduce(((t,{name:e,startTime:n,duration:r,entryType:i})=>(u(e),"mark"===i&&(t[e]??={},t[e].start??=[],t[e].start.push(n)),"measure"===i&&(t[e]??={},t[e].ranges??=[],t[e].ranges.push(o(n,n+r))),t)),{})},getChronoStateUsingPerformanceAPIFormat:()=>Object.entries(n).reduce(((t,[e,n])=>(n.start?.forEach((n=>t.push({duration:0,startTime:n,name:e,entryType:"mark"}))),n.ranges?.forEach((n=>t.push({duration:n.end-n.start,startTime:n.start,name:e,entryType:"measure"}))),t)),[]),average:function(){Object.entries(n).forEach((([t,e],n,r)=>{let i=0;r[0][1].ranges.forEach((({start:t,end:u},a)=>{if(0===n)return void(e.ranges[a]=o(t,u,a));const s=()=>{const n=e.ranges[i]?.start,o=r[0][1].ranges[a+1]?.start,u=n>=t,s=a+1===r[0][1].ranges.length||n<o;return u&&s};let c=!1;for(;s();){c=!0;const t=e.ranges[i];e.ranges[i+1];const n=e.ranges[i-1];n?.interval===a?(e.ranges[a]=o(t.start-(n.end-n.start),t.end,a),e.ranges.splice(i,1)):(e.ranges[i]=o(t.start,t.end,a),i++)}!1===c&&(Kt(i,o(void 0,void 0,a),e.ranges),i++)}))})),n=Object.entries(n).reduce(((t,[e,n],r,i)=>{const[u,a]=function(t,e,n){let r=!0;for(;0!==e&&!0===r;)r=n[--e][1].ranges.some((({start:e,end:n},r)=>!(void 0!==e&&void 0!==n||void 0===t.ranges[r].start&&void 0===t.ranges[r].end)));return[n[e][1].ranges,n[e][0]]}(n,r,i),[s,c,l]=n.ranges.reduce((([t,e,n],{start:o=0,end:i=0},a)=>(t=t+i-o,0!==r&&0!==o&&0!==i&&(e=e+o-u[a].end,n=n+o-u[a].start),[t,e,n])),[0,0,0]);let f,p;const h=n.ranges.filter((({start:t,end:e})=>void 0!==t&void 0!==e)).length;return 0===r&&(f=i[0][1].ranges[0].start),0!==r&&Math.abs(c)<=Math.abs(l)&&(f=t[a].ranges[0].end+c/h),0!==r&&Math.abs(l)<Math.abs(c)&&(f=t[a].ranges[0].start+l/n.ranges.length),p=f+s/n.ranges.length,t[e]={ranges:[o(f,p,0)]},t}),{})},reset:function(){n={},r={chronoCreation:r.chronoCreation}}}}function Jl({start:t,end:e}){return e-t}async function Hl(...t){const e=await fetch(...t),n=await e.json();return{status:e.status,body:n}}const{attemptP:Kl,Future:Xl}=Qc,Gl=({url:t,options:e}={})=>Kl((()=>Hl(t,e))),Ql=t=>(...e)=>Kl((()=>t(...e)));function Zl(t,e){let n=t.reduce(((t,{input:e,output:n})=>(t[JSON.stringify(e)]=n,t)),{});return function(t){const r=JSON.stringify(t);return Xl(((t,o)=>(setTimeout((()=>((t,e)=>{void 0!==n[r]?n[r].status>=600?e(new Error(JSON.stringify(n[r].body),null,2)):t({status:n[r].status,body:n[r].body}):e(new Error(`Fake Response not found for Request with key: ${r} in ${n}`))})(o,t)),parseInt(e,10)||0),function(){})))}}var tf,ef,nf,rf={exports:{}};ef=La,nf=function(){var t=function(){},e="undefined",n=typeof window!==e&&typeof window.navigator!==e&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"];function o(t,e){var n=t[e];if("function"==typeof n.bind)return n.bind(t);try{return Function.prototype.bind.call(n,t)}catch(e){return function(){return Function.prototype.apply.apply(n,[t,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function u(e,n){for(var o=0;o<r.length;o++){var i=r[o];this[i]=o<e?t:this.methodFactory(i,e,n)}this.log=this.debug}function a(t,n,r){return function(){typeof console!==e&&(u.call(this,n,r),this[t].apply(this,arguments))}}function s(r,u,s){return function(r){return"debug"===r&&(r="log"),typeof console!==e&&("trace"===r&&n?i:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):t)}(r)||a.apply(this,arguments)}function c(t,n,o){var i,a=this;n=null==n?"WARN":n;var c="loglevel";function l(){var t;if(typeof window!==e&&c){try{t=window.localStorage[c]}catch(t){}if(typeof t===e)try{var n=window.document.cookie,r=n.indexOf(encodeURIComponent(c)+"=");-1!==r&&(t=/^([^;]+)/.exec(n.slice(r))[1])}catch(t){}return void 0===a.levels[t]&&(t=void 0),t}}"string"==typeof t?c+=":"+t:"symbol"==typeof t&&(c=void 0),a.name=t,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=o||s,a.getLevel=function(){return i},a.setLevel=function(n,o){if("string"==typeof n&&void 0!==a.levels[n.toUpperCase()]&&(n=a.levels[n.toUpperCase()]),!("number"==typeof n&&n>=0&&n<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+n;if(i=n,!1!==o&&function(t){var n=(r[t]||"silent").toUpperCase();if(typeof window!==e&&c){try{return void(window.localStorage[c]=n)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"="+n+";"}catch(t){}}}(n),u.call(a,n,t),typeof console===e&&n<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(t){n=t,l()||a.setLevel(t,!1)},a.resetLevel=function(){a.setLevel(n,!1),function(){if(typeof window!==e&&c){try{return void window.localStorage.removeItem(c)}catch(t){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(t){}}}()},a.enableAll=function(t){a.setLevel(a.levels.TRACE,t)},a.disableAll=function(t){a.setLevel(a.levels.SILENT,t)};var f=l();null==f&&(f=n),a.setLevel(f,!1)}var l=new c,f={};l.getLogger=function(t){if("symbol"!=typeof t&&"string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=f[t];return e||(e=f[t]=new c(t,l.getLevel(),l.methodFactory)),e};var p=typeof window!==e?window.log:void 0;return l.noConflict=function(){return typeof window!==e&&window.log===l&&(window.log=p),l},l.getLoggers=function(){return f},l.default=l,l},(tf=rf).exports?tf.exports=nf():ef.log=nf();var of=Ba(rf.exports);const uf=function(){const t=ct("$YYYY-$MM-$DD $hh:$mm:$ss",new Date),e={get:function(n,r,o){const i={apply:function(e,n,r){return e(`${t} ${r.join(" ")} `)}};return"function"==typeof n[r]&&["trace","debug","info","warn","error","log"].includes(r)?new Proxy(n[r],i):void 0!==e[r]?e[r]:n[r]},set:function(t,n,r){return void 0!==e[n]?e[n]=r:t[n]=r,!0}};return new Proxy(of,e)}();uf.LEVEL_NUMBER_TO_NAME=Object.entries(of.levels).map((t=>t[0])),uf.NAME_TO_LEVEL_NUMBER={...of.levels},uf.levelName=function(t){return"number"==typeof t?uf.LEVEL_NUMBER_TO_NAME[t]:t},uf.levelNumber=function(t){return"string"==typeof t?uf.NAME_TO_LEVEL_NUMBER[t.toUpperCase()]:t};var af=sf;function sf(t,e){return t===e||(t!=t&&e!=e||typeof t==typeof e&&{}.toString.call(t)=={}.toString.call(e)&&(t===Object(t)&&(!!t&&(Array.isArray(t)?cf(t,e):"[object Set]"=={}.toString.call(t)?cf(Array.from(t),Array.from(e)):"[object Object]"=={}.toString.call(t)?function(t,e){var n=Object.keys(t),r=n.length;if(r!=Object.keys(e).length)return!1;for(var o=0;o<r;o++){var i=n[o];if(!e.hasOwnProperty(i)||!sf(t[i],e[i]))return!1}return!0}(t,e):function(t,e){return t.toString()===e.toString()}(t,e)))))}function cf(t,e){var n=t.length;if(n!=e.length)return!1;for(var r=0;r<n;r++)if(!sf(t[r],e[r]))return!1;return!0}const lf=Symbol("start"),ff=Symbol("end"),pf=new F(["OPEN_ARRAY","CLOSE_ARRAY","NODE","UNSYNC"]);class hf{constructor(t,e,n){this.node=t,this.path=[...e],this.name=n}[t.inspect.custom](){return`typeof node: ${typeof this.node}, path: ${this.path.join(".")} name: ${this.name}`}}class df{constructor(){this.nodes=[]}add(t,e){const n=this.calculateNodeName(t,e);if(this.findByName(n))throw new Error(`Node with name ${n} already exists`);const r=new hf(t,e,n);return this.nodes.push(r),r}findByName(t){return this.nodes.find((e=>e.name===t))}calculateNodeName(t,e){let n="";return t.name&&(n=t.name),"symbol"==typeof t&&(n=t.toString().replace("(","_").replace(")","")),this.findByName(n)?`${n}__${e.join("_")}`:n}getNodes(){return this.nodes}}class yf{constructor(t,e,n,r){this.type=t,this.starts=e,this.ends=n,this.relations=r}[t.inspect.custom](){return JSON.stringify(this)}toString(){JSON.stringify(this)}setType(t){return this.type=t,this}getRelations(){return this.relations}sync(t){for(const e of this.ends)for(const n of t.starts)e!==n&&this.relations.push([e,n]);return new yf(pf.NODE,this.starts,t.ends,[...this.relations,...t.relations])}static unsync(t,e){return new yf(pf.UNSYNC,[...t.starts,...e.starts],[...t.ends,...e.ends],[...t.relations,...e.relations])}}function gf(t){let e=t.length;for(;t.length>1;){for(let e=0;void 0!==t[e+1];e++)t[e].type===pf.NODE&&t[e+1].type===pf.NODE&&t.splice(e,2,t[e].sync(t[e+1])),t[e].type===pf.UNSYNC&&t[e+1].type===pf.UNSYNC&&t.splice(e,2,yf.unsync(t[e],t[e+1])),t[e]?.type!==pf.OPEN_ARRAY||t[e+1]?.type!==pf.NODE&&t[e+1]?.type!==pf.UNSYNC||t[e+2]?.type!==pf.CLOSE_ARRAY||t.splice(e,3,t[e+1].setType(pf.UNSYNC)),t[e]?.type===pf.OPEN_ARRAY&&(t[e+1]?.type===pf.NODE&&t[e+2]?.type===pf.UNSYNC||t[e+1]?.type===pf.UNSYNC&&t[e+2]?.type===pf.NODE)&&t[e+3]?.type===pf.CLOSE_ARRAY&&t.splice(e,4,t[e+1].sync(t[e+2]).setType(pf.UNSYNC)),t[e]?.type===pf.OPEN_ARRAY&&t[e+1]?.type===pf.UNSYNC&&t[e+2]?.type===pf.NODE&&t.splice(e+1,2,t[e+1].sync(t[e+2])),t[e]?.type===pf.NODE&&t[e+1]?.type===pf.UNSYNC&&t[e+2]?.type===pf.NODE&&t.splice(e,3,t[e].sync(t[e+1]).sync(t[e+2])),t[e]?.type===pf.NODE&&t[e+1]?.type===pf.UNSYNC&&t[e+2]?.type===pf.CLOSE_ARRAY&&t.splice(e,2,t[e].sync(t[e+1]));if(t.length===e)break;e=t.length}}function vf(t){let e=t.length;for(;t.length>1;){for(let e=0;void 0!==t[e+1];e++)if(t[e].type===pf.NODE&&t[e+1].type===pf.UNSYNC||t[e].type===pf.UNSYNC&&t[e+1].type===pf.NODE)return void t.splice(e,2,t[e].sync(t[e+1]).setType(pf.NODE));if(t.length===e)break;e=t.length}}class mf{constructor(t){const{transcript:e,nodes:n}=function(t){const e=new df,n=e.add(lf,[]),r=[];!function t(n,o){o.length;for(let i=0;i<n.length;i++)if(Array.isArray(n[i]))r.push(new yf(pf.OPEN_ARRAY)),o.push(i),t(n[i],o),o.pop(),r.push(new yf(pf.CLOSE_ARRAY));else{o.push(i),e.add(n[i],o),o.pop();const t=e.getNodes().at(-1);r.push(new yf(pf.NODE,[t],[t],[]))}}(t,[]);const o=e.add(ff,[]);return{transcript:[new yf(pf.NODE,[n],[n],[]),...r,new yf(pf.NODE,[o],[o],[])],nodes:e}}(t);for(this.nodes=n.getNodes();e.length>1;)gf(e),vf(e);this.relations=e[0].getRelations()}toPlantUML(){let t="@startuml\n";t+="allowmixing\n",t+="\n";for(const e of this.nodes)t+=`${"symbol"==typeof e?"diamond":"object"} ${e.name}\n`;t+="\n";for(const[e,n]of this.relations)t+=`${e.name} --\x3e ${n.name}\n`;return t+="\n",t+="@enduml\n",t}}const bf=t=>t.map(((t,e)=>0===e?0:parseInt(t,10)));function wf(t){let e=[];return q(t,((t,n,r)=>{"function"==typeof t&&!1===isNaN(parseInt(n.at(-1),10))&&e.push({value:t,path:bf(n)})})),e.push({value:Gn,path:[1]}),e}const Ef=t=>e=>t?.length>e?.length&&af(e,t.slice(0,e.length));const _f=(t,e,n)=>{var r;return(r=Qr(t)?.path,t=>af(r?.slice(0,-1),t?.slice(0,-1)))(e.path)?t[t.length-1].value=xl(Qr(t).value,e.value):t.push(e),t};function xf(t){return t.reduce(_f,[])}const Af=function(t){let e=!1,n=[];return(r,o,i,u)=>{const a=o.path.slice(0,-1),s=a?.slice(0,-1),c=u[i+1]?.path,l=c?.slice(0,-1),f=l?.slice(0,-1),p=u[i-1]?.path;p?.slice(0,-2);let h=o.path.length>=3&&af(s,f)&&af(function(t){return e=>t.filter((t=>e.length<t.path.length&&af(t.path.slice(0,e.length),e)))}(u)(a),[o])&&(e||!1===Ef(p)(s)||!0===Ef(p)(s)&&p.length<o.path.length);if(!0===h&&(e=!0,n.push(o)),!1===h&&!0===e){if(c?.length>o.path.length&&Ef(c)(s))return r.push(...n),r.push(o),e=!1,n=[],r;n.push(o),r.push({value:jl(t)(Ze("value",n)),path:o.path.slice(0,-1)})}return!1===h&&!1===e&&r.push(o),!1===h&&(e=!1,n=[]),r}},Of=t=>{let e,n=-1;ee(t.length).times((r=>{t[r]?.path?.length>t[r+1]?.path?.length&&n<t[r]?.path?.length&&(n=t[r]?.path?.length,e=r)}));let r=t;return void 0!==e&&(r=[...t],r[e]={value:r[e].value,path:r[e].path.slice(0,-1)}),r},Nf=t=>t[0]?.value??t?.value;function jf({numberOfThreads:t=1/0,mockupsObj:e={}}={numberOfThreads:1/0,mockupsObj:{}}){return{build:function n(r){const o=xl(wf,function(t){return e=>t?e.map((({path:e,value:n})=>void 0!==t?.[n.name]?"function"==typeof t[n.name]?{value:t[n.name],path:e}:{value:()=>t[n.name],path:e}:{value:n,path:e})):e}(e),Al((t=>t.length>1))(Al(...function(){let t;return[function(e){const n=e?.length<t?.length||void 0===t;return t=e,n},function(){t=void 0}]}())(xf,(t=>e=>e.reduce(Af(t),[]))(t)),Of),Nf)(r);return o.rebuild=o=>(function(n){({numberOfThreads:t,mockupsObj:e}=n)}(o),n(r)),o},map:function(e,n=t){const r=t=>Array.isArray(t)?jl(n)(t.map((t=>e.bind(e,t))))():[e(t)];return Object.defineProperty(r,"name",{value:`map_${e.name}`}),r},identity:function(...t){if(t.length>1)throw new Error("identity function only accepts one argument");return t[0]}}}var Sf=function t(e,n){if(!Cf(e))throw new Error("First argument must be an object");if(!(n instanceof Function))throw new Error("Second argument must be a function");var r={},o=Object.keys(e),i=o.length;for(let s=0;s<i;s++){var u=o[s],a=e[u];r[u]=Cf(a)?t(a,n):n(a,u)}return r};function Cf(t){return"[object Object]"===Object.prototype.toString.call(t)}const Tf=(t,e)=>{if("string"!=typeof e||e.length<1)return e;const n="length="+e.length;if(e.length>=n.length){const t=Math.floor((e.length-n.length)/2);return n.padEnd(n.length+t,"*").padStart(e.length,"*")}return"".padEnd(e.length,"*")},If=(t,e)=>e.substring(0,7)+Tf(0,e.substring(7)),$f={ibmApis:[{value:/^Bearer .*$/i,replacer:If},{field:/^client_secret$/i,replacer:Tf},{field:/^x-ibm-client-secret$/i,replacer:Tf},{field:/.*token$/i,replacer:Tf},{field:/^jwt$/i,replacer:Tf},{field:/^authorization$/i,replacer:Tf},{field:/^deviceId$/i,replacer:Tf}],pushNotification:[{field:/^body$/i,type:"string",replacer:Tf},{field:/^title$/i,replacer:Tf},{sanitizer:(t,e)=>"customer"===t?.toLowerCase()?"F"+Tf(0,e.substring(1)):e}]};function Rf(t){return"object"==typeof t&&"RegExp"===t.constructor.name}function Df(t){return t.flatMap((t=>{let e;return e="string"==typeof t?$f[t]:t,function(t){t.forEach((t=>{let e={rule:void 0,ops:0,name:void 0};if(void 0!==t.sanitizer&&(e.ops=e.ops+1,e.rule=t.sanitizer,e.name="sanitizer"),void 0!==t.field&&(e.ops=e.ops+2,e.rule=t.field,e.name="field"),void 0!==t.value&&(e.ops=e.ops+4,e.rule=t.value,e.name="value"),void 0===e.name)throw new P("SANITIZER_DEF_ERROR","Expected at least one filled property of: value, field or sanitizer.",t);if("field"===e.name&&"string"!=typeof e.rule&&!1===Rf(e.rule))throw new P("SANITIZER_DEF_ERROR","field property must be of string type",t);if(void 0!==t.type&&-1===["string","object","number","boolean"].indexOf(t.type))throw new P("SANITIZER_DEF_ERROR","type property must be of a valid type: string, object, number or boolean",t);if("sanitizer"===e.name&&"function"!=typeof e.rule)throw new P("SANITIZER_DEF_ERROR","sanitizer property must be a function.",t);if(-1!==[3,5,6,7].indexOf(e.ops))throw new P("SANITIZER_DEF_ERROR",(e>6?3:2)+" properties informed and only one allowed between: sanitizer, value or field.",t);if(void 0===t.replacer&&void 0===t.sanitizer)throw new P("SANITIZER_DEF_ERROR","Replacer OR sanitizer property must be defined.",t);if(void 0!==t.replacer&&void 0!==t.sanitizer)throw new P("SANITIZER_DEF_ERROR","Replacer AND sanitizer cannot be used together",t)}))}(e),e}))}function Pf(t,e=["ibmApis"],n){const r=uf.levelNumber(n);if(void 0!==r&&uf.getLevel()<=r)return t;const o=Df(e);return Sf(t,(function(t,e){if(null==t||0===Object.keys(t).length)return t;for(let{field:n,value:r,type:s,sanitizer:c,replacer:l}of o){if(!1===a(t,s))return t;if(void 0!==c)return c(e,t);if(void 0!==n&&i(n,e,t,e))return u(l,e,t);if(void 0!==r&&i(r,e,t,t))return u(l,e,t)}}));function i(t,e,n,r){return"function"==typeof t?t(e,n):Rf(t)&&"string"==typeof r?r?.match(t):af(t,r)}function u(t,e,n){return"function"==typeof t?t(e,n):t}function a(t,e){return void 0===e||typeof t===e}}export{zl as Chrono,mf as Compile,P as CustomError,ft as DAYS,U as Enum,F as EnumMap,Qc as F,Dl as Index,pt as MONTHS,Fa as R,Zc as RE,Tl as RLog,Pl as Table,Rl as Text,Vl as Timeline,lt as YYYY_MM_DD_hh_mm_ss_ToUtcDate,yt as addDays,r as anonymize,Y as arrayOfObjectsToObject,Lt as arraySorter,B as arrayToObject,If as bearerSanitizer,al as between,te as cleanString,ue as cloneCopy,Nt as colorByStatus,At as colorMessage,Ot as colorMessageByStatus,xt as colors,kl as consoleTable,Ml as consoleTableExtended,H as copyPropsWithValue,J as copyPropsWithValueUsingRules,k as createCustomErrorClass,st as dateFormatter,ht as dateToObj,bt as dayOfWeek,St as deepFreeze,Rt as defaultValue,dt as diffInDaysYYYY_MM_DD,hl as exclude,Hl as fetchImproved,Zl as ffletchMaker,Gt as fillWith,Ft as filterFlatMap,ll as filterMap,jt as findDeepKey,kt as findIndexInSortedArray,Ut as findIndexOrNextInSortedArray,Mt as findIndexOrPreviousInSortedArray,vl as findSolution,G as firstCapital,Gl as fletch,ct as formatDate,Ct as getAt,wt as getSameDateOrPreviousFridayForWeekends,tl as groupByWithCalc,ot as indexOfNthMatch,el as innerRightJoinWith,K as isALeaf,M as isBasicType,ut as isDate,Et as isDateMidnight,X as isEmpty,Bt as isPromise,at as isStringADate,Tf as lengthSanitizer,uf as log,$ as logWithPrefix,re as loopIndexGenerator,fl as mapWithNext,pl as mapWithPrevious,sl as matchByPropId,Xt as memoize,Cl as mergeArrayOfObjectsRenamingProps,mt as nextDayOfWeek,zt as notTo,Qt as numberToFixedString,ne as oneIn,Ol as parallel,ml as partialAtPos,It as pathReplacingArrayIndexWithAsterisk,Sl as pickPaths,xl as pipe,Al as pipeWhile,_l as pipeWithChain,jf as plan,vt as previousDayOfWeek,oe as processExit,z as project,se as promiseAll,Ql as promiseFunToFutureFun,Kt as pushAt,Jt as pushUniqueKey,Ht as pushUniqueKeyOrChange,Q as queryObjToStr,W as removeDuplicates,ee as repeat,Zt as replaceAll,Vt as retryWithSleep,jl as runFunctionsSyncOrParallel,Nl as runFutureFunctionsInParallel,Pf as sanitize,Tt as setAt,_t as setDateToMidnight,Yt as sleep,qt as sleepWithFunction,Wt as sleepWithValue,gl as something,Pt as sorterByFields,Dt as sorterByPaths,cl as splitCond,$t as stripDollarRoot,gt as subtractDays,D as summarizeError,L as transition,q as traverse,V as traverseVertically,bl as uncurry,nl as unionWithHashKeys,ul as updateWithHashKeys,nt as urlCompose,rt as urlDecompose,Z as varSubsDoubleBracket,ae as wildcardToRegExp};
